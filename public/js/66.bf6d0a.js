(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"59LO":function(e,t,a){"use strict";var o=a("U0Fb");a.n(o).a},"N+rb":function(e,t,a){"use strict";a.r(t);var o=a("o0o1"),r=a.n(o),n=a("yXPU"),i=a.n(n),l=a("wd/R"),s=a.n(l),c=(a("2F5j"),a("HF+U")),u=a("GczY"),d=a("gmK0"),m=a("OuqF"),p=a("+Awk"),f=a("29dw"),_=new f.a("contratoEmpleado"),v=new p.a("contratoEmpleado"),g={data:function(){return{activeName:"first",currentEmpleado:{id:0},query:{page:1,limit:15,keyword:"",role:""},contratos:[],dialogoContrato:!1,dialogTitle:"",dialogRef:"EmpleadosContratosDialog",dialogoPrintContrato:!1,fechaContrato:"",agregarContratoDialog:!1,addContratoTitle:"",currentContrato:{id:0,sueldo:0,bono:0,inicio_contrato:"",termino_contrato:"",firmado:0,duracion:0,empleado_id:0,contrato_actual:1,ultimo_contrato:0},tiempo_contrato_select:[{id:1,nombre:"1 Meses",meses:1},{id:3,nombre:"3 Meses",meses:3},{id:-1,nombre:"Tiempo indefinido",meses:-1}]}},computed:{disableImprimir:function(){return""==this.fechaContrato||null==this.fechaContrato},disableEditar:function(){return 0==this.currentContrato.id},finContrato:function(){if(""==this.currentContrato.inicio_contrato||0==this.currentContrato.duracion||null==this.currentContrato.duracion||-1==this.currentContrato.duracion)return console.log("ENTRO A IF"),this.currentContrato.termino_contrato="","——"}},directives:{waves:c.a,permission:u.a,role:d.a},methods:{checkPermission:m.a,getList:function(){var e=this;return i()(r.a.mark((function t(){var a,o,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.query,a.limit,a.page,t.next=3,_.contratosByEmpleado(e.currentEmpleado.id);case 3:o=t.sent,n=o.data,o.meta,console.log("GET LIST DATA"),console.log(n),e.contratos=n;case 9:case"end":return t.stop()}}),t)})))()},submitContrato:function(){var e=this;return i()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(""==e.currentContrato.sueldo||e.currentContrato.sueldo<1)){t.next=3;break}return e.$message.error("Ingresa un sueldo"),t.abrupt("return",!1);case 3:if(""!=e.currentContrato.inicio_contrato){t.next=6;break}return e.$message.error("Ingresa inicio del contrato"),t.abrupt("return",!1);case 6:if(""!=e.currentContrato.duracion){t.next=9;break}return e.$message.error("Ingresa duración del contrato"),t.abrupt("return",!1);case 9:console.log("Current contrato"),console.log(e.currentContrato),e.currentContrato.empleado_id=e.currentEmpleado.id,0==e.contratos.length?e.currentContrato.ultimo_contrato=0:e.currentContrato.ultimo_contrato=e.contratos[e.contratos.length-1].id,v.store({current:e.currentContrato}).then((function(t){console.log("RESPONSE: "),console.log(t),e.$message({message:"Contrato agregado correctamente.",type:"success",duration:5e3}),e.agregarContratoDialog=!1,e.getList()})).catch((function(e){console.log(e)}));case 14:case"end":return t.stop()}}),t)})))()},compareDates:function(e){e=s()(e);var t=s()();return t>=e?"danger":e.diff(t,"days")<6&&e.diff(t,"days")>=0?"warning":""},handleCurrentChangeTable:function(e){null!=e&&(this.currentContrato=e)},open:function(){this.dialogoContrato=!0,console.log("PARENT CURRENT:"),console.log(this.$parent.current),this.currentEmpleado=this.$parent.current,this.dialogTitle="Contratos: ("+this.currentEmpleado.numero_empleado+") "+this.currentEmpleado.nombre+" "+this.currentEmpleado.apellidos,this.getList()},close:function(){this.dialogoContrato=!1},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.clearFields(),t.close()})).catch((function(e){}))},handlePrintContrato:function(){this.dialogoPrintContrato=!0},handleClosePrePrint:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.dialogoPrintContrato=!1})).catch((function(e){}))},closeAgregarDialog:function(){this.setCurrentAgregarContrato(),this.agregarContratoDialog=!1,this.clearCurrentContrato()},setCurrentAgregarContrato:function(e){this.$refs.contratosList.setCurrentRow(e)},handleAddContrato:function(){if(0==this.contratos.length)this.agregarContratoDialog=!0,this.addContratoTitle="Agregar Contrato",this.clearCurrentContrato();else{var e=this.contratos[this.contratos.length-1].termino_contrato;console.log("COMPARAR FECHAS AGREGAR"),console.log(this.compareDates(e)),"danger"!=this.compareDates(e)||"warning"!=this.compareDates(e)?this.$message({type:"warning",message:"No puedes agregar otro contrato hasta que el contrato actual termine o este apunto de terminar."}):(this.agregarContratoDialog=!0,this.addContratoTitle="Agregar Contrato",this.clearCurrentContrato())}},handleEditContrato:function(){this.agregarContratoDialog=!0,this.addContratoTitle="Editar Contrato"},deleteContrato:function(e){var t=this;this.$confirm("Esto eliminara permanentemente la Orden Abierta. Quieres continuar?","Advertencia",{confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",type:"warning"}).then((function(){v.destroy(t.currentContrato.id).then((function(e){console.log("DESTROY RESPONSE"),console.log(e),t.$message({message:e.message,type:e.type,duration:5e3}),t.getList(),t.agregarContratoDialog=!1})).catch((function(e){console.log(e)}))})).catch((function(){t.$message({type:"info",message:"Eliminacion cancelada"})}))},clearCurrentContrato:function(){this.currentContrato={id:0,sueldo:0,inicio_contrato:"",termino_contrato:"",firmado:0}},changeFinContrato:function(){if(""==this.currentContrato.inicio_contrato||0==this.currentContrato.duracion||null==this.currentContrato.duracion||-1==this.currentContrato.duracion)return console.log("ENTRO A IF"),this.currentContrato.termino_contrato="","——";console.log("NO ENTRO A IF");var e=new Date(this.currentContrato.inicio_contrato),t=new Date(e.setMonth(e.getMonth()+this.currentContrato.duracion));this.currentContrato.termino_contrato=t}}},h=a("KHd+"),b=Object(h.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"EmpleadosContratosForm",attrs:{model:e.currentEmpleado,"label-position":"top","label-width":"150px"}},[a("el-dialog",{ref:e.dialogRef,attrs:{title:e.dialogTitle,width:"50%",visible:e.dialogoContrato},on:{"update:visible":function(t){e.dialogoContrato=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Numero de Empleado"}},[a("el-tag",{attrs:{type:"info"}},[e._v(" "+e._s(e.currentEmpleado.numero_empleado))])],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Empleado"}},[a("el-tag",{attrs:{type:"info"}},[e._v(" "+e._s(e.currentEmpleado.nombre+" "+e.currentEmpleado.apellidos))])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-tabs",{attrs:{stretch:!0},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"Contratos",name:"first"}},[a("el-row",[a("div",{staticClass:"filter-container"},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["agregar contratos empleados activos"],expression:"['agregar contratos empleados activos']"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleAddContrato()}}},[e._v("\n                        Agregar Contrato\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["editar contratos empleados activos"],expression:"['editar contratos empleados activos']"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-edit",disabled:e.disableEditar},on:{click:function(t){return e.handleEditContrato()}}},[e._v("\n                        Editar Contrato\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["eliminar contratos empleados activos"],expression:"['eliminar contratos empleados activos']"}],staticClass:"filter-item",attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:e.disableEditar},on:{click:function(t){return e.deleteContrato()}}},[e._v("\n                        Eliminar Contrato\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["imprimir contratos empleados activos"],expression:"['imprimir contratos empleados activos']"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-printer",disabled:e.disableEditar},on:{click:function(t){return e.handlePrintContrato()}}},[e._v("\n                        Imprimir Contrato\n                    ")])],1)]),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"space-around",id:"embarqueTransfer"}},[a("el-col",[a("el-table",{ref:"contratosList",staticStyle:{width:"100%","word-wrap":"break-word"},attrs:{data:e.contratos,"highlight-current-row":"",sortable:"",border:"","tooltip-effect":"light",fit:""},on:{"current-change":e.handleCurrentChangeTable}},[a("el-table-column",{attrs:{prop:"inicio_contrato",label:"Inicio del Contrato","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v("\n                            "+e._s(e._f("moment")(t.row.inicio_contrato,"YYYY-MMM-DD"))+"\n                        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"termino_contrato",label:"Final del Contrato","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!=t.row.duracion?a("el-tag",{attrs:{type:e.compareDates(t.row.termino_contrato)}},[e._v("\n                            "+e._s(e._f("moment")(t.row.termino_contrato,"YYYY-MMM-DD"))+"\n                        ")]):e._e(),e._v(" "),-1==t.row.duracion?a("el-tag",[e._v(" —— ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"duracion",label:"Duración",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[-1==t.row.duracion?a("el-tag",[e._v("Tiempo Indefinido")]):e._e(),e._v(" "),-1!=t.row.duracion?a("el-tag",[e._v(" "+e._s(t.row.duracion)+" Meses")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sueldo",label:"Sueldo",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"bono",label:"Bono de Puntualidad",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"firmado",label:"Firmado",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.firmado?a("el-tag",{attrs:{type:"success"}},[a("i",{staticClass:"el-icon-success"})]):e._e(),e._v(" "),0==t.row.firmado?a("el-tag",{attrs:{type:"danger"}},[a("i",{staticClass:"el-icon-error"})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contrato_actual",label:"Contrato actual",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.contrato_actual?a("el-tag",{attrs:{type:"success"}},[a("i",{staticClass:"el-icon-success"})]):e._e(),e._v(" "),0==t.row.contrato_actual?a("el-tag",{attrs:{type:"danger"}},[a("i",{staticClass:"el-icon-error"})]):e._e()]}}])})],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"float-left",on:{click:function(t){e.dialogoContrato=!1}}},[e._v("Cerrar")])],1)],1),e._v(" "),a("el-dialog",{attrs:{id:"dialogoAgregarDocumento",title:e.addContratoTitle,visible:e.agregarContratoDialog,width:"23%"},on:{"update:visible":function(t){e.agregarContratoDialog=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-form-item",{attrs:{label:"Inicio del Contrato",prop:"inicio_contrato"}},[a("el-date-picker",{attrs:{format:"yyyy-MMM-dd",type:"date"},on:{change:function(t){return e.changeFinContrato()}},model:{value:e.currentContrato.inicio_contrato,callback:function(t){e.$set(e.currentContrato,"inicio_contrato",t)},expression:"currentContrato.inicio_contrato"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-form-item",{attrs:{label:"Duración del Contrato",prop:"inicio_contrato"}},[a("el-select",{attrs:{"value-key":"id"},on:{change:function(t){return e.changeFinContrato()}},model:{value:e.currentContrato.duracion,callback:function(t){e.$set(e.currentContrato,"duracion",t)},expression:"currentContrato.duracion"}},e._l(e.tiempo_contrato_select,(function(e){return a("el-option",{key:e.id,attrs:{label:e.nombre,value:e.id}})})),1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-form-item",{attrs:{label:"Final del Contrato",prop:"termino_contrato"}},[a("el-date-picker",{attrs:{format:"yyyy-MMM-dd",readonly:!0,type:"date"},model:{value:e.currentContrato.termino_contrato,callback:function(t){e.$set(e.currentContrato,"termino_contrato",t)},expression:"currentContrato.termino_contrato"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-form-item",{attrs:{label:"Sueldo",prop:"sueldo"}},[a("vue-numeric",{staticClass:"el-input__inner",attrs:{precision:2,currency:"$",separator:","},model:{value:e.currentContrato.sueldo,callback:function(t){e.$set(e.currentContrato,"sueldo",t)},expression:"currentContrato.sueldo"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-form-item",{attrs:{label:"Bono",prop:"bono"}},[a("vue-numeric",{staticClass:"el-input__inner",attrs:{precision:2,currency:"$",separator:","},model:{value:e.currentContrato.bono,callback:function(t){e.$set(e.currentContrato,"bono",t)},expression:"currentContrato.bono"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","active-text":"Firmado"},model:{value:e.currentContrato.firmado,callback:function(t){e.$set(e.currentContrato,"firmado",t)},expression:"currentContrato.firmado"}})],1),e._v(" "),a("el-col")],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"float-left",on:{click:function(t){return e.closeAgregarDialog()}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.submitContrato}},[e._v("Guardar")])],1)],1),e._v(" "),a("el-dialog",{attrs:{id:"dialogoPrePrint",title:"Imprimir Contrato",visible:e.dialogoPrintContrato,width:"30%"},on:{"update:visible":function(t){e.dialogoPrintContrato=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[e._v("\n            Fecha Contrato:\n          ")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{format:"yyyy-MMM-dd",type:"date"},model:{value:e.fechaContrato,callback:function(t){e.fechaContrato=t},expression:"fechaContrato"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"float-left",attrs:{size:"small"},on:{click:function(t){e.dialogoPrintContrato=!1,e.fileList=[]}}},[e._v("Cancelar")]),e._v(" "),a("router-link",{attrs:{target:"_blank",to:{name:"contrato_empleado_download",params:{fechaContrato:JSON.stringify(e.fechaContrato),currentContrato:JSON.stringify(e.currentContrato),currentEmpleado:JSON.stringify(e.currentEmpleado)}}}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",disabled:e.disableImprimir}},[e._v("\n                  Imprimir Contrato\n              ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,C=a("lSNA"),w=a.n(C),y=(new f.a("contratoEmpleado"),new p.a("bajaEmpleado")),E={data:function(){return{activeName:"first",fechaRenuncia:"",dialogoPrintRenuncia:!1,dialogoPrintFiniquito:!1,currentEmpleado:{id:0},contratoActual:{id:0},empleado_vacaciones:{id:0,tiempo_anos:0,dias_vacaciones:0},currentBajaEmpleado:w()({id:0,fecha_baja:"",fecha_inicial_labores:"",tipo_baja_id:"",dias_laborados:0,vacaciones:0,prima_vacacional:0,aguinaldo:0,firmado:0,empleado_id:0,motivo:"",tipo:0,notas:"",salario:0,salario_diario:0},"empleado_id",0),rules:{fecha_baja:[{required:!0,message:"Selecciona una fecha de baja",trigger:"blur"}],fecha_inicial_labores:[{required:!0,message:"Selecciona una fecha de inicio de labores",trigger:"blur"}],tipo_baja_id:[{required:!0,message:"Selecciona un tipo de baja",trigger:"change"}]},tipo_baja_list:[{id:1,tipo:"Renuncia"},{id:2,tipo:"Despido"}],vacaciones:[{id:1,tiempo_anos:1,dias_vacaciones:6},{id:2,tiempo_anos:2,dias_vacaciones:8},{id:3,tiempo_anos:3,dias_vacaciones:10},{id:4,tiempo_anos:4,dias_vacaciones:12},{id:5,tiempo_anos:9,dias_vacaciones:14},{id:6,tiempo_anos:14,dias_vacaciones:16},{id:7,tiempo_anos:19,dias_vacaciones:18},{id:8,tiempo_anos:24,dias_vacaciones:20},{id:9,tiempo_anos:29,dias_vacaciones:22}],query:{page:1,limit:15,keyword:"",role:""},contratos:[],dialogoBaja:!1,dialogTitle:"",dialogRef:"EmpleadosBajasDialog"}},computed:{dias_vacaciones:function(){var e=s()(this.currentBajaEmpleado.fecha_inicial_labores),t=s()(this.currentBajaEmpleado.fecha_baja);if(!e.isValid()||!t.isValid())return console.log("NULL AMBOS"),0;var a=t.diff(e,"years");return this.empleado_vacaciones=this.vacaciones.find((function(e){return e.tiempo_anos>a})),console.log(" DIAS VACACINOES) EMPLEADO VACACIONES"),console.log(this.empleado_vacaciones),this.currentBajaEmpleado.vacaciones=this.empleado_vacaciones.dias_vacaciones/365*this.currentBajaEmpleado.dias_laborados,this.currentBajaEmpleado.prima_vacacional=.25*this.currentBajaEmpleado.vacaciones,this.currentBajaEmpleado.aguinaldo=15/365*this.currentBajaEmpleado.dias_laborados,this.empleado_vacaciones.dias_vacaciones},dias_laborados:function(){var e=s()(this.currentBajaEmpleado.fecha_inicial_labores),t=s()(this.currentBajaEmpleado.fecha_baja);return this.currentBajaEmpleado.dias_laborados=t.diff(e,"days"),this.currentBajaEmpleado.dias_laborados},total_finiquito:function(){return this.currentBajaEmpleado.vacaciones*this.currentBajaEmpleado.salario_diario+this.currentBajaEmpleado.prima_vacacional*this.currentBajaEmpleado.salario_diario+this.currentBajaEmpleado.aguinaldo*this.currentBajaEmpleado.salario_diario},disableImprimir:function(){return""==this.fechaRenuncia||null==this.fechaRenuncia}},directives:{waves:c.a,permission:u.a,role:d.a},methods:{checkPermission:m.a,submitBajaEmpleado:function(){var e=this;return i()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("CURRENT EMPLEADO"),console.log(e.currentEmpleado),e.currentBajaEmpleado.empleado_id=e.currentEmpleado.id,e.$refs.EmpleadosBajasForm.validate((function(t){if(!t)return!1;y.store({current:e.currentBajaEmpleado}).then((function(t){console.log("RESPONSE: "),console.log(t),e.$parent.getList(),e.$message({message:"Contrato agregado correctamente.",type:"success",duration:5e3}),e.dialogoBaja=!1})).catch((function(e){console.log(e)}))}));case 4:case"end":return t.stop()}}),t)})))()},formatPrice:function(e){return(e/1).toFixed(2).replace(",",".").toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatDecimales:function(e){return(e/1).toFixed(6).replace(",",".").toString()},validarFecha:function(){var e=s()(this.currentBajaEmpleado.fecha_inicial_labores),t=s()(this.currentBajaEmpleado.fecha_baja);(e.isValid()||t.isValid())&&e>t&&(this.$message({message:"La fecha de inicio de labores no puede ser mayor a la fecha de baja.",type:"warning",duration:5e3}),this.currentBajaEmpleado.fecha_inicial_labores=s()(this.currentEmpleado.fecha_entrada),this.currentBajaEmpleado.fecha_baja=s()())},open:function(){this.dialogoBaja=!0,this.activeName="first",this.currentEmpleado=this.$parent.current,this.currentBajaEmpleado.fecha_inicial_labores=s()(this.currentEmpleado.fecha_entrada),this.currentBajaEmpleado.fecha_baja=s()(),this.contratoActual=this.$parent.contratos.find((function(e){return 1==e.contrato_actual})),this.currentBajaEmpleado.salario=this.contratoActual.sueldo,this.currentBajaEmpleado.salario_diario=this.contratoActual.sueldo/7,this.dialogTitle="Dar de Baja: ("+this.currentEmpleado.numero_empleado+") "+this.currentEmpleado.nombre+" "+this.currentEmpleado.apellidos},close:function(){this.dialogoBaja=!1},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.clearFields(),t.close()})).catch((function(e){}))},handlePrintRenuncia:function(){this.dialogoPrintRenuncia=!0},handlePrintFiniquito:function(){this.dialogoPrintFiniquito=!0}}},k=Object(h.a)(E,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"EmpleadosBajasForm",attrs:{model:e.currentBajaEmpleado,"label-position":"top","label-width":"150px",rules:e.rules}},[a("el-dialog",{ref:e.dialogRef,attrs:{title:e.dialogTitle,width:"40%",visible:e.dialogoBaja},on:{"update:visible":function(t){e.dialogoBaja=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Numero de Empleado"}},[a("el-tag",{attrs:{type:"info"}},[e._v(" "+e._s(e.currentEmpleado.numero_empleado))])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Empleado"}},[a("el-tag",{attrs:{type:"info"}},[e._v(" "+e._s(e.currentEmpleado.nombre+" "+e.currentEmpleado.apellidos))])],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Fecha de Inicio de Labores",prop:"fecha_inicial_labores"}},[a("el-date-picker",{attrs:{format:"yyyy-MMM-dd",type:"date"},on:{change:function(t){return e.validarFecha()}},model:{value:e.currentBajaEmpleado.fecha_inicial_labores,callback:function(t){e.$set(e.currentBajaEmpleado,"fecha_inicial_labores",t)},expression:"currentBajaEmpleado.fecha_inicial_labores"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Fecha de la Baja",prop:"fecha_baja"}},[a("el-date-picker",{attrs:{format:"yyyy-MMM-dd",type:"date"},on:{change:function(t){return e.validarFecha()}},model:{value:e.currentBajaEmpleado.fecha_baja,callback:function(t){e.$set(e.currentBajaEmpleado,"fecha_baja",t)},expression:"currentBajaEmpleado.fecha_baja"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}}),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Tipo de Baja",prop:"tipo_baja_id"}},[a("el-select",{attrs:{"value-key":"id"},model:{value:e.currentBajaEmpleado.tipo_baja_id,callback:function(t){e.$set(e.currentBajaEmpleado,"tipo_baja_id",t)},expression:"currentBajaEmpleado.tipo_baja_id"}},e._l(e.tipo_baja_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.tipo,value:e.id}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Motivo de la Baja ",prop:"motivo"}},[a("el-input",{model:{value:e.currentBajaEmpleado.motivo,callback:function(t){e.$set(e.currentBajaEmpleado,"motivo",t)},expression:"currentBajaEmpleado.motivo"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Salario"}},[a("el-tag",{attrs:{type:"info"}},[e._v(" $ "+e._s(e.formatPrice(e.currentBajaEmpleado.salario)))])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Salario diario"}},[a("el-tag",{attrs:{type:"info"}},[e._v(" $ "+e._s(e.formatPrice(e.currentBajaEmpleado.salario_diario)))])],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Días Laborados"}},[a("el-tag",{attrs:{type:"info"}},[e._v(" "+e._s(e.dias_laborados)+" Días")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Días de Vacaciones"}},[a("el-tag",{attrs:{type:"info"}},[e._v(" "+e._s(e.dias_vacaciones)+" ")])],1)],1)],1),e._v(" "),a("el-form-item",[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"Finiquito",name:"first"}},[a("table",{staticStyle:{border:"0px",width:"100%"}},[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[e._v(" Concepto ")]),e._v(" "),a("th",{staticStyle:{"text-align":"left"}},[e._v(" Porcentaje ")]),e._v(" "),a("th",{staticStyle:{"text-align":"left"}},[e._v(" Total ")])]),e._v(" "),a("tr",[a("td",[e._v(" Vacaciones ")]),e._v(" "),a("td",[e._v(" "+e._s(e.formatDecimales(e.currentBajaEmpleado.vacaciones))+" ")]),e._v(" "),a("td",[e._v(" $ "+e._s(e.formatPrice(e.currentBajaEmpleado.vacaciones*e.currentBajaEmpleado.salario_diario))+"   ")])]),e._v(" "),a("tr",[a("td",[e._v(" Prima Vacacional ")]),e._v(" "),a("td",[e._v(" "+e._s(e.formatDecimales(e.currentBajaEmpleado.prima_vacacional))+" ")]),e._v(" "),a("td",[e._v(" $ "+e._s(e.formatPrice(e.currentBajaEmpleado.prima_vacacional*e.currentBajaEmpleado.salario_diario))+" ")])]),e._v(" "),a("tr",[a("td",[e._v(" Aguinaldo ")]),e._v(" "),a("td",[e._v(" "+e._s(e.formatDecimales(e.currentBajaEmpleado.aguinaldo))+" ")]),e._v(" "),a("td",[e._v(" $ "+e._s(e.formatPrice(e.currentBajaEmpleado.aguinaldo*e.currentBajaEmpleado.salario_diario))+" ")])]),e._v(" "),a("tr",[a("td"),e._v(" "),a("td",[a("b",[e._v(" Total ")])]),e._v(" "),a("td",[a("b",[e._v(" $ "+e._s(e.formatPrice(e.total_finiquito))+" ")])])])])]),e._v(" "),a("el-tab-pane",{attrs:{label:"Notas",name:"second"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:16,maxRows:16}},model:{value:e.currentBajaEmpleado.notas,callback:function(t){e.$set(e.currentBajaEmpleado,"notas",t)},expression:"currentBajaEmpleado.notas"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","active-text":"Firmado"},model:{value:e.currentBajaEmpleado.firmado,callback:function(t){e.$set(e.currentBajaEmpleado,"firmado",t)},expression:"currentBajaEmpleado.firmado"}})],1),e._v(" "),a("el-col")],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-printer"},on:{click:function(t){return e.handlePrintFiniquito()}}},[e._v("\n          Imprimir Finiquito\n      ")]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-printer"},on:{click:function(t){return e.handlePrintRenuncia()}}},[e._v("\n          Imprimir Renuncia\n      ")]),e._v(" "),a("el-button",{staticClass:"float-left",on:{click:function(t){e.dialogoBaja=!1}}},[e._v("Cerrar")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-check"},on:{click:function(t){return e.submitBajaEmpleado()}}},[e._v("Dar de Baja")])],1)],1),e._v(" "),a("el-dialog",{attrs:{id:"dialogoPrePrint",title:"Imprimir Renuncia",visible:e.dialogoPrintRenuncia,width:"30%"},on:{"update:visible":function(t){e.dialogoPrintRenuncia=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[e._v("\n            Fecha de la Renuncia:\n          ")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{format:"yyyy-MMM-dd",type:"date"},model:{value:e.fechaRenuncia,callback:function(t){e.fechaRenuncia=t},expression:"fechaRenuncia"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"float-left",attrs:{size:"small"},on:{click:function(t){e.dialogoPrintRenuncia=!1}}},[e._v("Cancelar")]),e._v(" "),a("router-link",{attrs:{target:"_blank",to:{name:"renuncia_empleado_download",params:{fechaRenuncia:JSON.stringify(e.fechaRenuncia),currentBajaEmpleado:JSON.stringify(e.currentBajaEmpleado),currentEmpleado:JSON.stringify(e.currentEmpleado)}}}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",disabled:e.disableImprimir}},[e._v("\n                  Imprimir Renuncia\n              ")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{id:"dialogoPrePrintFiniquito",title:"Imprimir Finiquito",visible:e.dialogoPrintFiniquito,width:"30%"},on:{"update:visible":function(t){e.dialogoPrintFiniquito=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[e._v("\n            Fecha de la Renuncia:\n          ")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{format:"yyyy-MMM-dd",type:"date"},model:{value:e.fechaRenuncia,callback:function(t){e.fechaRenuncia=t},expression:"fechaRenuncia"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"float-left",attrs:{size:"small"},on:{click:function(t){e.dialogoPrintFiniquito=!1}}},[e._v("Cancelar")]),e._v(" "),a("router-link",{attrs:{target:"_blank",to:{name:"finiquito_empleado_download",params:{fechaRenuncia:JSON.stringify(e.fechaRenuncia),currentBajaEmpleado:JSON.stringify(e.currentBajaEmpleado),currentEmpleado:JSON.stringify(e.currentEmpleado)}}}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",disabled:e.disableImprimir}},[e._v("\n                  Imprimir Finiquito\n              ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,j=a("AAa2"),x=a("LyCN"),B=a("k9pt"),D=(a("7tbW"),new f.a("contratoEmpleado")),S=new p.a("empleados"),N=new p.a("departamentos"),$=new p.a("puestos"),P=new p.a("estados"),F={name:"EmpleadosList",components:{Pagination:B.a,EmpleadosContratosDialog:b,EmpleadosBajasDialog:k,EmpleadosHistorialDialog:j.a,EmpleadosHistorialSueldoDialog:x.a},directives:{waves:c.a,permission:u.a,role:d.a},created:function(){this.getList()},data:function(){return{loading:!0,activeName:"first",list:[],total:0,query:{page:1,limit:15,keyword:"",role:""},queryPuesto:{departamento_id:0},formVisible:!1,formTitle:"",current:{id:0,numero_empleado:"",nombre:"",apellidos:"",telefono_casa:"",telefono_celular:"",email:"",fecha_nacimiento:"",fecha_entrada:"",direccion:"",colonia:"",ciudad:"",estado_id:"",rfc:"",nss:"",curp:"",puesto_id:"",departamento_id:"",documentos:[],tipo_empleado_id:""},departamentos_list:[],loadingDepartamentos:!1,puestos_list:[],loadingPuestos:!1,estados_list:[],contratos:[],tipos_empleado_list:[{id:1,nombre:"Empleado de planta"},{id:2,nombre:"Empleado eventual"}],dialogoPrintCartaResponsiva:!1,fechaCartaResponsiva:"",rules:{fecha_entrada:[{required:!0,message:"Selecciona una Fecha de Entrada",trigger:"blur"}],fecha_nacimiento:[{required:!0,message:"Selecciona una Fecha de Nac.",trigger:"blur"}],nombre:[{required:!0,message:"Ingresa los Nombres",trigger:"blur"}],apellidos:[{required:!0,message:"Ingresa los Apellidos",trigger:"blur"}],rfc:[{required:!0,message:"Ingresa el RFC",trigger:"blur"}],nss:[{required:!0,message:"Ingresa el NSS",trigger:"blur"}],curp:[{required:!0,message:"Ingresa el Curp",trigger:"blur"}],direccion:[{required:!0,message:"Ingresa la Dirección",trigger:"blur"}],colonia:[{required:!0,message:"Ingresa la Colonia",trigger:"blur"}],ciudad:[{required:!0,message:"Ingresa la Ciudad",trigger:"blur"}],estado_id:[{required:!0,message:"Selecciona un Estado",trigger:"change"}],puesto_id:[{required:!0,message:"Selecciona un Puesto",trigger:"change"}]},dialogoDocumentosAgregarVisible:!1,fileList:[]}},computed:{disableEditar:function(){return 0==this.current.id},disableImprimir:function(){return""==this.fechaCartaResponsiva||null==this.fechaCartaResponsiva}},methods:{getEstados:function(){var e=this;return i()(r.a.mark((function t(){var a,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.list();case 2:a=t.sent,o=a.data,a.meta,e.estados_list=o;case 6:case"end":return t.stop()}}),t)})))()},getDepartamentos:function(){var e=this;return i()(r.a.mark((function t(){var a,o,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.puestos_list=[],e.loadingDepartamentos=!0,a=e.query,a.limit,a.page,t.next=5,N.list(e.query);case 5:o=t.sent,n=o.data,o.meta,e.departamentos_list=n,e.loadingDepartamentos=!1;case 10:case"end":return t.stop()}}),t)})))()},getPuestos:function(){var e=this;return i()(r.a.mark((function t(){var a,o,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.puestos_list=[],0!=e.current.departamento_id){t.next=3;break}return t.abrupt("return",!1);case 3:return e.queryPuesto.departamento_id=e.current.departamento_id,e.loadingPuestos=!0,a=e.queryPuesto,a.limit,a.page,t.next=8,$.list(e.queryPuesto);case 8:o=t.sent,n=o.data,o.meta,e.puestos_list=n,e.loadingPuestos=!1;case 13:case"end":return t.stop()}}),t)})))()},changeDepartamentos:function(){this.getPuestos()},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},handleCurrentChangeTable:function(e){console.log("HANDLE CURRENT CHANGE TABLE"),console.log(e),null!=e&&(this.current=e)},setCurrent:function(e){this.$refs.tableList.setCurrentRow(e)},handleCreateForm:function(){this.activeName="first",this.formVisible=!0,this.formTitle="Agregar Nuevo Empleado",this.getDepartamentos(),this.getEstados(),this.clearCurrent()},handleEditForm:function(){this.activeName="first",this.formTitle="Editar Empleado",this.current.departamento_id=this.current.puesto.departamento.id,this.getDepartamentos(),this.getPuestos(),this.getEstados(),this.formVisible=!0},handleBajaEmpleado:function(){var e=this;this.$confirm("Esto eliminara permanentemente el Empleado. Quieres continuar?","Advertencia",{confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",type:"warning"}).then((function(){S.destroy(e.current.id).then((function(t){console.log("DESTROY RESPONSE"),console.log(t),e.$message({message:t.message,type:t.type,duration:5e3}),e.getList(),e.agregarContratoDialog=!1})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"Eliminacion cancelada"})}))},handleContratosForm:function(){this.$refs.EmpleadosContratosDialog.open()},handleBajasForm:function(){var e=this;return i()(r.a.mark((function t(){var a,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.contratosByEmpleado(e.current.id);case 2:a=t.sent,o=a.data,a.meta,e.contratos=o,e.contratos.length>0?e.$refs.EmpleadosBajasDialog.open():e.$message({type:"warning",message:"No puedes dar de baja un empleado sin contrato."});case 7:case"end":return t.stop()}}),t)})))()},handleHistorialForm:function(){this.$refs.EmpleadosHistorialDialog.open()},handleHistorialSueldoForm:function(){this.$refs.EmpleadosHistorialSueldoDialog.open()},handleFilter:function(){this.query.page=1,this.getList()},handlePrintCartaResponsiva:function(){this.dialogoPrintCartaResponsiva=!0},getList:function(){var e=this;return i()(r.a.mark((function t(){var a,o,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("GET LIST METHOD"),a=e.query,a.limit,a.page,e.query.bajas=0,e.loading=!0,t.next=6,S.list(e.query);case 6:o=t.sent,n=o.data,o.meta,console.log("GET LIST DATA"),console.log(n),e.list=n,e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;var a=e.$loading({target:".el-dialog"});S.store({current:e.current}).then((function(t){e.$message({message:"Empleado agregado correctamente.",type:"success",duration:5e3}),e.formVisible=!1,e.clearCurrent(),e.getList(),a.close()})).catch((function(e){console.log(e),a.close()}))}))},clearCurrent:function(){this.setCurrent(),this.current={id:0,numero_empleado:"",nombre:"",apellidos:"",telefono_casa:"",telefono_celular:"",email:"",fecha_nacimiento:"",fecha_entrada:"",direccion:"",colonia:"",ciudad:"",estado_id:"",rfc:"",nss:"",curp:"",puesto_id:"",departamento_id:"",documentos:[]}},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.dialogoDocumentosAgregarVisible=!1})).catch((function(e){}))},submitUpload:function(){var e=this;if("undefined"==e.fileList[0]||null==e.fileList[0])return e.notificarError("Selecciona un archivo para subir"),!1;var t=this.$loading({target:"#dialogoAgregarDocumento > .el-dialog"}),a=new FormData;a.append("file",e.fileList[0].raw),a.append("embarque_id",e.current.id),axios.post("/embarques/documentos/store",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){e.$message.success("Guardado correctamente."),e.current.documentos=a.data.documentos,e.fileList=[],t.close(),e.dialogoDocumentos=!1})).catch((function(a){e.$message.error("Hubo un error."),console.log(a),t.close(),e.dialogoDocumentosAgregarVisible=!1}))},deleteDocumento:function(e){var t=this;t.loading=!0;var a=this.$loading({target:"#dialogoAgregarDocumento > .el-dialog"});axios.post("/embarques/documentos/delete",{embarque_id:t.current.id,documento_id:e.id}).then((function(o){t.current.documentos.map((function(e){return e.id})).indexOf(e.id);t.current.documentos=o.data.documentos,t.$message.success("Eliminado correctamente."),a.close()})).catch((function(e){t.$message.error("Hubo un error."),console.log(e)}))},handleProgress:function(e,t,a){t.raw.status="uploading"},handleSuccess:function(e,t,a){t.raw.status="success"},handleUploadChange:function(e,t){this.fileList=t.slice(-1)}}},R=(a("59LO"),Object(h.a)(F,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"filter-item"},[a("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"buscar",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{slot:"append",size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter},slot:"append"})],1)],1),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["agregar empleados activos"],expression:"['agregar empleados activos']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleCreateForm()}}},[e._v("\n            "+e._s(e.$t("table.add"))+"\n        ")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["editar empleados activos"],expression:"['editar empleados activos']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-edit",disabled:e.disableEditar},on:{click:function(t){return e.handleEditForm()}}},[e._v("Editar")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["contratos empleados activos"],expression:"['contratos empleados activos']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-edit",disabled:e.disableEditar},on:{click:function(t){return e.handleContratosForm()}}},[e._v("Contratos")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["dar baja empleados activos"],expression:"['dar baja empleados activos']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"danger",size:"small",icon:"el-icon-user",disabled:e.disableEditar},on:{click:function(t){return e.handleBajasForm()}}},[e._v("Dar de Baja")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["historial alta baja empleados activos"],expression:"['historial alta baja empleados activos']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-time",disabled:e.disableEditar},on:{click:function(t){return e.handleHistorialForm()}}},[e._v("\n           Historial Alta/baja")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["historial sueldos empleados activos"],expression:"['historial sueldos empleados activos']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-money",disabled:e.disableEditar},on:{click:function(t){return e.handleHistorialSueldoForm()}}},[e._v("\n           Historial Sueldos")])],1),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableList",staticStyle:{width:"100%","word-wrap":"break-word"},attrs:{data:e.list,"highlight-current-row":"",sortable:"",border:"","tooltip-effect":"light",fit:""},on:{"current-change":e.handleCurrentChangeTable}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("ul",{staticStyle:{"list-style":"none"}},[a("li",[a("p",[a("b",[e._v("Dirección:")]),e._v("  "+e._s(e.capitalizeFirstLetter(t.row.direccion))+","+e._s(e.capitalizeFirstLetter(t.row.colonia))+". "+e._s(e.capitalizeFirstLetter(t.row.ciudad))+", "+e._s(e.capitalizeFirstLetter(t.row.estado.estado))+".")])]),e._v(" "),a("li",[a("p",[a("b",[e._v("Contacto:")]),e._v(" "+e._s(t.row.telefono_casa)+" - "+e._s(t.row.telefono_celular)+" - "+e._s(t.row.email))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"numero_empleado",label:"Núm. de Empleado",align:"center","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("af-table-column",{attrs:{prop:"apellidos",label:"Apellidos","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.capitalizeFirstLetter(t.row.apellidos))+"\n                ")]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"nombre",label:"Nombre","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.capitalizeFirstLetter(t.row.nombre))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"fecha_entrada",label:"Fecha de Entrada",align:"center","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("moment")(t.row.fecha_entrada,"YYYY-MMM-DD"))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tipo_empleado_id",label:"Tipo de Empleado",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.tipo_empleado_id?a("span",[e._v("Empleado de Planta")]):e._e(),e._v(" "),2==t.row.tipo_empleado_id?a("span",[e._v(" Empleado Eventual")]):e._e()]}}])}),e._v(" "),a("af-table-column",{attrs:{prop:"Puesto.no",label:"Puesto (departamento)","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.puesto.nombre)+" ("+e._s(t.row.puesto.departamento.nombre)+")\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"fecha_nacimiento",label:"Fecha de Nac.",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("moment")(t.row.fecha_nacimiento,"YYYY-MMM-DD"))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rfc",label:"RFC",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"nss",label:"NSS",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"curp",label:"curp",align:"center","show-overflow-tooltip":""}})],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{layout:"prev, pager, next",total:e.total,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.getList}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"60%"},on:{"update:visible":function(t){e.formVisible=t}}},[a("div",{staticClass:"form-container"},[a("el-form",{ref:"form",attrs:{model:e.current,rules:e.rules,"label-position":"top","label-width":"150px"}},[a("el-tabs",{attrs:{stretch:!0},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"General",name:"first"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Numero de Empleado",prop:"numero_empleado"}},[a("el-tag",{attrs:{type:"info"}},[e._v(" "+e._s(""==e.current.numero_empleado?"—":e.current.numero_empleado))])],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Fecha de Entrada",prop:"fecha_entrada"}},[a("el-date-picker",{attrs:{type:"date"},model:{value:e.current.fecha_entrada,callback:function(t){e.$set(e.current,"fecha_entrada",t)},expression:"current.fecha_entrada"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Fecha de Nacimiento",prop:"fecha_nacimiento"}},[a("el-date-picker",{attrs:{type:"date"},model:{value:e.current.fecha_nacimiento,callback:function(t){e.$set(e.current,"fecha_nacimiento",t)},expression:"current.fecha_nacimiento"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Nombre",prop:"nombre"}},[a("el-input",{model:{value:e.current.nombre,callback:function(t){e.$set(e.current,"nombre",t)},expression:"current.nombre"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Apellidos",prop:"apellidos"}},[a("el-input",{model:{value:e.current.apellidos,callback:function(t){e.$set(e.current,"apellidos",t)},expression:"current.apellidos"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"RFC",prop:"rfc"}},[a("el-input",{attrs:{maxlength:"13"},model:{value:e.current.rfc,callback:function(t){e.$set(e.current,"rfc",t)},expression:"current.rfc"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"NSS",prop:"nss"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],model:{value:e.current.nss,callback:function(t){e.$set(e.current,"nss",t)},expression:"current.nss"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"CURP",prop:"curp"}},[a("el-input",{attrs:{maxlength:"18"},model:{value:e.current.curp,callback:function(t){e.$set(e.current,"curp",t)},expression:"current.curp"}})],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Direcciónes"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Calle y Numero",prop:"direccion"}},[a("el-input",{model:{value:e.current.direccion,callback:function(t){e.$set(e.current,"direccion",t)},expression:"current.direccion"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Colonia",prop:"colonia"}},[a("el-input",{model:{value:e.current.colonia,callback:function(t){e.$set(e.current,"colonia",t)},expression:"current.colonia"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Ciudad",prop:"ciudad"}},[a("el-input",{model:{value:e.current.ciudad,callback:function(t){e.$set(e.current,"ciudad",t)},expression:"current.ciudad"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Estado",prop:"estado_id"}},[a("el-select",{attrs:{"value-key":"id"},model:{value:e.current.estado_id,callback:function(t){e.$set(e.current,"estado_id",t)},expression:"current.estado_id"}},e._l(e.estados_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.estado,value:e.id}})})),1)],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Contacto"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Teléfono  de Casa",prop:"telefono_casa"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"(###) ###-##-##",expression:"'(###) ###-##-##'"}],model:{value:e.current.telefono_casa,callback:function(t){e.$set(e.current,"telefono_casa",t)},expression:"current.telefono_casa"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Celular",prop:"telefono_celular"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"(686) ###-##-##",expression:"'(686) ###-##-##'"}],model:{value:e.current.telefono_celular,callback:function(t){e.$set(e.current,"telefono_celular",t)},expression:"current.telefono_celular"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{model:{value:e.current.email,callback:function(t){e.$set(e.current,"email",t)},expression:"current.email"}})],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Info. Laboral"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Departamento",prop:"departamento_id"}},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDepartamentos,expression:"loadingDepartamentos"}],attrs:{"value-key":"id"},on:{change:function(t){return e.changeDepartamentos()}},model:{value:e.current.departamento_id,callback:function(t){e.$set(e.current,"departamento_id",t)},expression:"current.departamento_id"}},e._l(e.departamentos_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.nombre,value:e.id}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Puesto",prop:"puesto_id"}},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPuestos,expression:"loadingPuestos"}],attrs:{"value-key":"id"},model:{value:e.current.puesto_id,callback:function(t){e.$set(e.current,"puesto_id",t)},expression:"current.puesto_id"}},e._l(e.puestos_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.nombre,value:e.id}})})),1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Tipo de Empleado",prop:"tipo_empleado_id"}},[a("el-select",{attrs:{"value-key":"id"},model:{value:e.current.tipo_empleado_id,callback:function(t){e.$set(e.current,"tipo_empleado_id",t)},expression:"current.tipo_empleado_id"}},e._l(e.tipos_empleado_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.nombre,value:e.id}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col")],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"float-left",on:{click:function(t){e.formVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){return e.handleSubmit()}}},[e._v("Confirmar")])],1)]),e._v(" "),a("el-dialog",{attrs:{id:"dialogoAgregarDocumento",title:"Agregar Documento a Embarque",visible:e.dialogoDocumentosAgregarVisible,"before-close":e.handleClose,width:"23%"},on:{"update:visible":function(t){e.dialogoDocumentosAgregarVisible=t}}},[a("div",{staticClass:"filter-container"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","file-list":e.fileList,"auto-upload":!1,"on-change":e.handleUploadChange,"on-progress":e.handleProgress,"on-success":e.handleSuccess,drag:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Arrastra un archivo aqui o "),a("em",[e._v("click para subir")])])])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"float-left",on:{click:function(t){e.dialogoDocumentosAgregarVisible=!1,e.fileList=[]}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.submitUpload}},[e._v("Guardar")])],1)]),e._v(" "),a("el-dialog",{attrs:{id:"dialogoPrePrint",title:"Imprimir Carta Responsiva",visible:e.dialogoPrintCartaResponsiva,width:"30%"},on:{"update:visible":function(t){e.dialogoPrintCartaResponsiva=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[e._v("\n            Fecha Carta Responsiva:\n            ")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{format:"yyyy-MMM-dd",type:"date"},model:{value:e.fechaCartaResponsiva,callback:function(t){e.fechaCartaResponsiva=t},expression:"fechaCartaResponsiva"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"float-left",attrs:{size:"small"},on:{click:function(t){e.dialogoPrintCartaResponsiva=!1,e.fileList=[]}}},[e._v("Cancelar")]),e._v(" "),a("router-link",{attrs:{target:"_blank",to:{name:"carta_responsiva_empleado_download",params:{fechaCartaResponsiva:JSON.stringify(e.fechaCartaResponsiva),currentEmpleado:JSON.stringify(e.current)}}}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",disabled:e.disableImprimir}},[e._v("\n                    Imprimir Contrato\n                ")])],1)],1)],1),e._v(" "),a("EmpleadosContratosDialog",{ref:"EmpleadosContratosDialog"}),e._v(" "),a("EmpleadosBajasDialog",{ref:"EmpleadosBajasDialog"}),e._v(" "),a("EmpleadosHistorialDialog",{ref:"EmpleadosHistorialDialog"}),e._v(" "),a("EmpleadosHistorialSueldoDialog",{ref:"EmpleadosHistorialSueldoDialog"})],1)}),[],!1,null,null,null));t.default=R.exports},U0Fb:function(e,t,a){var o=a("rd3N");"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(o,r);o.locals&&(e.exports=o.locals)},rd3N:function(e,t,a){(t=a("JPst")(!1)).push([e.i,"\n.el-select {\n    width:100%;\n}\n.el-transfer-panel{\n    width: 35%;\n}\n.input-with-select .el-input-group__prepend {\n    background-color: #fff;\n}\n.pre-formateado {\n    white-space: pre;\n}\n.el-table .cell {\n    word-break: break-word;\n}\n\n\n",""]),e.exports=t}}]);