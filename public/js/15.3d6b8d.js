(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+Awk":function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var r=o("lwsE"),n=o.n(r),a=o("W8MJ"),i=o.n(a),s=o("rywy"),l=function(){function e(t){n()(this,e),this.uri=t}return i()(e,[{key:"list",value:function(e){return Object(s.a)({url:"/"+this.uri,method:"get",params:e})}},{key:"get",value:function(e){return Object(s.a)({url:"/"+this.uri+"/"+e,method:"get"})}},{key:"store",value:function(e){return Object(s.a)({url:"/"+this.uri,method:"post",data:e})}},{key:"update",value:function(e,t){return Object(s.a)({url:"/"+this.uri+"/"+e,method:"put",data:t})}},{key:"destroy",value:function(e){return Object(s.a)({url:"/"+this.uri+"/"+e,method:"delete"})}}]),e}()},"+H+N":function(e,t,o){var r=o("dzJH");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(r,n);r.locals&&(e.exports=r.locals)},"4Aq5":function(e,t,o){var r=o("EyLs");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(r,n);r.locals&&(e.exports=r.locals)},"5vkU":function(e,t,o){"use strict";o.d(t,"a",(function(){return g}));var r=o("lwsE"),n=o.n(r),a=o("W8MJ"),i=o.n(a),s=o("7W2i"),l=o.n(s),c=o("a1gu"),u=o.n(c),d=o("Nsbk"),p=o.n(d),m=o("rywy");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=p()(e);if(t){var n=p()(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return u()(this,o)}}var g=function(e){l()(o,e);var t=f(o);function o(){return n()(this,o),t.call(this,"proyectosProductos")}return i()(o,[{key:"getProcesosFromProyectoProducto",value:function(e){return Object(m.a)({url:"/proyectosProductos/getProcesosFromProyectoProducto",method:"post",data:e})}},{key:"insertMultipleOrdenesAbiertas",value:function(e){return Object(m.a)({url:"/proyectosProductos/insertMultipleOrdenesAbiertas",method:"post",data:e})}},{key:"arreglarListado",value:function(){return Object(m.a)({url:"/proyectosProductos/arreglarListado",method:"post"})}},{key:"store",value:function(e){return Object(m.a)({url:"/proyectosProductos/store",method:"post",data:e})}},{key:"updateMultiplePlanCorte",value:function(e){return Object(m.a)({url:"/proyectosProductos/updateMultiplePlanCorte",method:"post",data:e})}},{key:"deleteFromProject",value:function(e){return Object(m.a)({url:"/proyectosProductos/deleteFromProject",method:"post",data:e})}},{key:"deleteMultipleFromProject",value:function(e){return Object(m.a)({url:"/proyectosProductos/deleteMultipleFromProject",method:"post",data:e})}},{key:"getOrdenesAbiertasList",value:function(e){return Object(m.a)({url:"/proyectosProductos/getOrdenesAbiertasList",method:"get",params:e})}},{key:"getOrdenesTerminadasSinEmbarcarList",value:function(e){return Object(m.a)({url:"/proyectosProductos/getOrdenesTerminadasSinEmbarcarList",method:"get",params:e})}},{key:"getDocumentosFromOrden",value:function(e){return Object(m.a)({url:"/proyectosProductos/getDocumentosFromOrden",method:"get",params:e})}},{key:"OrdenesTerminadasSinEmbarcar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(m.a)({url:"/"+this.uri+"/"+e+"/OrdenesTerminadasSinEmbarcar",method:"get"})}},{key:"getOrdenesAbiertasByCliente",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(m.a)({url:"/"+this.uri+"/"+e+"/getOrdenesAbiertasByCliente",method:"get"})}}]),o}(o("+Awk").a)},"7W2i":function(e,t,o){var r=o("SksO");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},"7sWw":function(e,t,o){var r=o("VyIk");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(r,n);r.locals&&(e.exports=r.locals)},EyLs:function(e,t,o){(t=o("JPst")(!1)).push([e.i,"\n.pagination-container[data-v-68c28e9d] {\n  background: #fff;\n  padding: 32px 16px;\n}\n.pagination-container.hidden[data-v-68c28e9d] {\n  display: none;\n}\n",""]),e.exports=t},FowT:function(e,t,o){"use strict";var r=o("Tlbl");o.n(r).a},GczY:function(e,t,o){"use strict";var r=o("g6NE"),n={inserted:function(e,t,o){var n=t.value,a=r.a.getters&&r.a.getters.permissions;if(!(n&&n instanceof Array&&n.length>0))throw new Error("Permissions are required! Example: v-permission=\"['manage user','manage permission']\"");var i=n;a.some((function(e){return i.includes(e)}))||e.parentNode&&e.parentNode.removeChild(e)}},a=function(e){e.directive("permission",n)};window.Vue&&(window.permission=n,Vue.use(a)),n.install=a;t.a=n},"HF+U":function(e,t,o){"use strict";o("7sWw");var r="@@wavesContext";function n(e,t){function o(o){var r=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),a=n.ele;if(a){a.style.position="relative",a.style.overflow="hidden";var i=a.getBoundingClientRect(),s=a.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":((s=document.createElement("span")).className="waves-ripple",s.style.height=s.style.width=Math.max(i.width,i.height)+"px",a.appendChild(s)),n.type){case"center":s.style.top=i.height/2-s.offsetHeight/2+"px",s.style.left=i.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(o.pageY-i.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(o.pageX-i.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=n.color,s.className="waves-ripple z-active",!1}}return e[r]?e[r].removeHandle=o:e[r]={removeHandle:o},o}var a={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[r].removeHandle,!0),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[r].removeHandle,!1),e[r]=null,delete e[r]}},i=function(e){e.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(i)),a.install=i;t.a=a},Nsbk:function(e,t){function o(t){return e.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(t)}e.exports=o},OuqF:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var r=o("g6NE");function n(e){if(e&&e instanceof Array&&e.length>0){var t=r.a.getters&&r.a.getters.permissions,o=e;return t.some((function(e){return o.includes(e)}))}return console.error("Need permissions! Like v-permission=\"['manage permission','edit article']\""),!1}},OyD8:function(e,t,o){"use strict";o.r(t);var r=o("o0o1"),n=o.n(r),a=o("yXPU"),i=o.n(a),s=o("lSNA"),l=o.n(s),c=(o("fJGn"),o("GczY")),u=o("wd/R"),d=o.n(u),p=o("gmK0"),m=o("HF+U"),f=o("OuqF"),g=o("lwsE"),h=o.n(g),v=o("W8MJ"),_=o.n(v),b=o("7W2i"),y=o.n(b),w=o("a1gu"),P=o.n(w),k=o("Nsbk"),C=o.n(k),x=o("rywy"),S=o("+Awk");function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=C()(e);if(t){var n=C()(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return P()(this,o)}}var O=function(e){y()(o,e);var t=E(o);function o(){return h()(this,o),t.call(this,"productos")}return _()(o,[{key:"getProductosByCliente",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(x.a)({url:"/"+this.uri+"/"+e+"/getProductosByCliente",method:"get"})}}]),o}(S.a),$=o("5vkU"),D=new O("proyectosProductos"),N=new $.a("proyectosProductos"),F={data:function(){var e;return{clientes:[],productosSelect:[],activeName:"first",form:{id:0,cliente_id:"",cliente_nombre:"",numero_parte_cliente:"",numero_parte:"",orden_compra:"",plan_corte:"",fecha_entrega:"",fecha_promesa:"",productos:[],agrupar:1},rules:{orden_compra:[{required:!0,message:"Ingresa un número de parte",trigger:"blur"}],cliente_id:[{required:!0,message:"Selecciona un cliente",trigger:"change"}],fecha_entrega:[{required:!0,message:"Selecciona una fecha de entrega",trigger:"blur"}],fecha_promesa:[{required:!0,message:"Selecciona una fecha promesa",trigger:"blur"}]},dialogoAgregar:!1,dialogRef:"myForm",dialogoProductos:!1,loadingCliente:!1,page:1,pageSize:10,total:0,dialogoCambiarPlanCorte:!1,nuevoPlanCorte:"",formTitle:"",showMultipleSelection:!1,multipleSelection:[],loadingProyectosProductos:!1,currentProyectoProducto:(e={id:0,numero_parte:"",cantidad:1,heat_number:"",work_order:"",item:"",precio_pesos:0,precio_dlls:0,agrupar:1,proyecto_id:0,producto_id:"",nombre_producto:""},l()(e,"agrupar",1),l()(e,"plan_corte",""),l()(e,"fecha_entrega",""),l()(e,"fecha_promesa",""),l()(e,"numero_parte_cliente",""),e),dialogoProyectoProductoEdit:!1}},computed:{searching:function(){return this.total=this.form.productos.length,this.form.productos},displayData:function(){return this.searching.slice(this.pageSize*this.page-this.pageSize,this.pageSize*this.page)},disableAddProducto:function(){return 1==this.showMultipleSelection||0==this.form.cliente_id},disableEditProducto:function(){return 1==this.showMultipleSelection||0==this.currentProyectoProducto.id},disableDeleteProducto:function(){return 1==this.showMultipleSelection?!(this.multipleSelection.length>0):0==this.currentProyectoProducto.id},disableCambiarPlanCorte:function(){return 1!=this.showMultipleSelection||!(this.multipleSelection.length>0)},showCambiarPlanCorte:function(){return 1==this.showMultipleSelection&&this.multipleSelection.length>0},agruparTexto:function(){return 1==this.currentProyectoProducto.agrupar?"Agrupar":"Agregar "+this.currentProyectoProducto.cantidad+" Orden(es) Nueva(s)"},agruparDisabled:function(){return this.currentProyectoProducto.cantidad>1?(this.currentProyectoProducto.agrupar=0,!1):(this.currentProyectoProducto.agrupar=1,!0)}},directives:{waves:m.a,permission:c.a,role:p.a},methods:{checkPermission:f.a,open:function(){this.getClientes(),this.dialogoAgregar=!0,this.loadingProyectosProductos=!1},close:function(){this.$parent.setCurrent(),this.dialogoAgregar=!1,this.loadingProyectosProductos=!1},handleCreateForm:function(){this.dialogoProyectoProductoEdit=!0,this.formTitle="Agregar Orden",this.getProductos(),this.clearCurrent()},handleEditForm:function(){this.formTitle="Editar Orden",this.dialogoProyectoProductoEdit=!0},insert:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var o=t.$loading({target:".el-dialog"}),r=t;axios.put("/proyectos/insert",r.form).then((function(e){console.log("RESPONSE"),console.log(e),0==r.form.id?(console.log("ESTO ERA AGREGAR"),r.$parent.loadFieldsUpdate(e.data[0])):(console.log("Esto era editar"),r.$parent.getList(),r.clearFields(),r.close()),o.close(),r.$message.success("Guardado correctamente.")})).catch((function(e){r.$message.error("Hubo un error."),console.log(e)}))}))},clearFields:function(){this.form.id=0,this.form.cliente_id=0,this.form.cliente_nombre="",this.form.numero_parte_cliente="",this.form.numero_parte="",this.form.orden_compra="",this.form.plan_corte="",this.form.fecha_entrega="",this.form.fecha_promesa="",this.form.productos=[]},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.clearFields(),t.close()})).catch((function(e){}))},handleCurrentChangePagination:function(e){this.page=e},getProductos:function(){var e=this;return i()(n.a.mark((function t(){var o,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.getProductosByCliente(e.form.cliente_id);case 2:o=t.sent,r=o.data,o.meta,console.log("DATA GET PRODUCTOS"),console.log(r),e.productosSelect=r;case 8:case"end":return t.stop()}}),t)})))()},getClientes:function(){var e=this;this.loadingClientes=!0,axios.get("/clientes").then((function(t){e.clientes=t.data,e.loadingClientes=!1})).catch((function(t){e.$message.error("Hubo un error."),console.log(t),e.loadingClientes=!1}))},changeCliente:function(){var e=this;""!=this.form.cliente_nombre?this.clientes.forEach((function(t){t.nombre_cliente==e.form.cliente_nombre&&(e.form.cliente_id=t.id)})):this.current.cliente_id=0},clearCurrent:function(){var e;this.setCurrent(),this.currentProyectoProducto=(e={id:0,numero_parte:"",cantidad:1,heat_number:"",work_order:"",item:"",precio_pesos:0,precio_dlls:0,agrupar:1,proyecto_id:this.form.id,producto_id:"",nombre_producto:"",numero_parte_cliente:""},l()(e,"agrupar",1),l()(e,"plan_corte",""),l()(e,"fecha_entrega",d()()),l()(e,"fecha_promesa",d()()),e)},updatePlanCorte:function(){var e=this;return i()(n.a.mark((function t(){var o,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.nuevoPlanCorte){t.next=3;break}return e.$message.error("Ingresa Plan de Corte"),t.abrupt("return",!1);case 3:return o=e.$loading({target:"#dialogCambiarPlanCorte > .el-dialog"}),t.next=6,N.updateMultiplePlanCorte({nuevoPlanCorte:e.nuevoPlanCorte,multipleSelection:e.multipleSelection,proyecto_id:e.form.id});case 6:r=t.sent,e.form.productos=r[0].productos,e.setCurrent(),e.multipleSelection=[],e.nuevoPlanCorte="",e.dialogoCambiarPlanCorte=!1,e.showMultipleSelection=!1,o.close();case 14:case"end":return t.stop()}}),t)})))()},handleCambiarPlanCorte:function(){this.dialogoCambiarPlanCorte=!0},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChangeTable:function(e){console.log("VAL:::"),console.log(e),null!=e?(this.currentProyectoProducto=e.proyecto_producto,this.currentProyectoProducto.nombre_producto=e.numero_parte_cliente+" - "+e.nombre_producto,this.currentProyectoProducto.proyecto_id=this.form.id):this.clearCurrent()},setCurrent:function(e){this.$refs.proyectos_productos_table.setCurrentRow(e)},updateOrCreateProyectoProducto:function(){var e=this;return i()(n.a.mark((function t(){var o,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.currentProyectoProducto.cantidad&&0!=e.currentProyectoProducto.cantidad){t.next=3;break}return e.$message.error("Ingresa una cantidad valida"),t.abrupt("return",!1);case 3:return o=e.$loading({target:"#dialogProyectoProducto > .el-dialog"}),t.next=6,N.store(e.currentProyectoProducto);case 6:r=t.sent,e.form.productos=r[0].productos,e.setCurrent(),e.dialogoProyectoProductoEdit=!1,o.close();case 11:case"end":return t.stop()}}),t)})))()},deleteRowProductos:function(){var e=this;return i()(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$confirm("Esto eliminara permanentemente la Orden. Quieres continuar?","Advertencia",{confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",type:"warning"}).then(i()(n.a.mark((function t(){var o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loadingProyectosProductos=!0,1!=e.showMultipleSelection){t.next=8;break}return t.next=4,N.deleteMultipleFromProject({multipleSelection:e.multipleSelection,proyecto_id:e.form.id});case 4:o=t.sent,e.showMultipleSelection=!1,t.next=11;break;case 8:return t.next=10,N.deleteFromProject(e.currentProyectoProducto);case 10:o=t.sent;case 11:e.form.productos=o[0].productos,e.loadingProyectosProductos=!1;case 13:case"end":return t.stop()}}),t)})))).catch((function(){e.$message({type:"info",message:"Eliminacion cancelada"})}));case 1:case"end":return t.stop()}}),t)})))()}}},T=(o("SI32"),o("KHd+")),A=Object(T.a)(F,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top","label-width":"150px"}},[o("el-dialog",{ref:e.dialogRef,attrs:{width:"60%","before-close":e.handleClose,visible:e.dialogoAgregar},on:{"update:visible":function(t){e.dialogoAgregar=t}}},[0==e.form.id?o("span",{attrs:{slot:"title"},slot:"title"},[o("i",{staticClass:"el-icon-plus"}),e._v(" Agregar Proyecto")]):e._e(),e._v(" "),0!=e.form.id?o("span",{attrs:{slot:"title"},slot:"title"},[o("i",{staticClass:"el-icon-edit"}),e._v(" Editar Proyecto ")]):e._e(),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.id,expression:"form.id"}],attrs:{hidden:""},domProps:{value:e.form.id},on:{input:function(t){t.target.composing||e.$set(e.form,"id",t.target.value)}}}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.numero_parte,expression:"form.numero_parte"}],attrs:{hidden:""},domProps:{value:e.form.numero_parte},on:{input:function(t){t.target.composing||e.$set(e.form,"numero_parte",t.target.value)}}}),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"Número de Parte (Local)",prop:"numero_parte"}},[o("el-tag",{attrs:{type:"info"}},[e._v(" "+e._s(""==e.form.numero_parte?"—":e.form.numero_parte))])],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Cliente",prop:"cliente_id"}},[o("el-select",{attrs:{id:"cliente_select",disabled:!e.checkPermission(["editar proyectos"]),"value-key":"nombre_cliente",filterable:""},on:{change:function(t){return e.changeCliente()}},model:{value:e.form.cliente_nombre,callback:function(t){e.$set(e.form,"cliente_nombre",t)},expression:"form.cliente_nombre"}},e._l(e.clientes,(function(e){return o("el-option",{key:e.id,attrs:{label:e.nombre_cliente,value:e.nombre_cliente}})})),1)],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:"Orden de Compra (Cliente)",prop:"orden_compra"}},[o("el-input",{attrs:{disabled:!e.checkPermission(["editar proyectos"])},model:{value:e.form.orden_compra,callback:function(t){e.$set(e.form,"orden_compra",t)},expression:"form.orden_compra"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[e.checkPermission(["ver fecha entrega proyectos"])?o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"Fecha de Entrega",prop:"fecha_entrega"}},[o("el-date-picker",{attrs:{disabled:!e.checkPermission(["editar proyectos"]),type:"date"},model:{value:e.form.fecha_entrega,callback:function(t){e.$set(e.form,"fecha_entrega",t)},expression:"form.fecha_entrega"}})],1)],1):e._e(),e._v(" "),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"Fecha de Promesa",prop:"fecha_promesa"}},[o("el-date-picker",{attrs:{disabled:!e.checkPermission(["editar proyectos"]),type:"date"},model:{value:e.form.fecha_promesa,callback:function(t){e.$set(e.form,"fecha_promesa",t)},expression:"form.fecha_promesa"}})],1)],1)],1),e._v(" "),0!=e.form.id?o("el-row",[o("el-col",[o("el-tabs",{attrs:{stretch:!0},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"Ordenes del Proyecto",name:"first"}},[o("el-row",[o("div",{staticClass:"filter-container"},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{disabled:e.disableAddProducto,"v-show":e.checkPermission(["agrergar productos proyectos"]),size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleCreateForm()}}},[e._v("\n                                                Agregar")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{disabled:e.disableEditProducto,"v-show":e.checkPermission(["editar productos proyectos"]),size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.handleEditForm()}}},[e._v("\n                                                Editar")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{disabled:e.disableDeleteProducto,"v-show":e.checkPermission(["eliminar productos proyectos"]),size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteRowProductos()}}},[e._v("\n                                                Eliminar")]),e._v(" "),o("el-popover",{staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{placement:"right-start",size:"small",width:"400",trigger:"click"}},[o("el-switch",{attrs:{"active-text":"Multiseleccion","active-value":!0,"inactive-value":!1},model:{value:e.showMultipleSelection,callback:function(t){e.showMultipleSelection=t},expression:"showMultipleSelection"}}),e._v(" "),o("el-button",{attrs:{slot:"reference",type:"primary",size:"small",icon:"el-icon-setting"},slot:"reference"})],1)],1)]),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"space-around",id:"embarqueTransfer"}},[o("el-col",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingProyectosProductos,expression:"loadingProyectosProductos"}],ref:"proyectos_productos_table",staticStyle:{width:"100%"},attrs:{data:e.displayData,border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChangeTable,"selection-change":e.handleSelectionChange}},[e.showMultipleSelection?o("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}):e._e(),e._v(" "),o("el-table-column",{attrs:{prop:"proyecto_producto.numero_parte",label:"Orden","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"proyecto_producto.numero_parte_cliente",label:"NP Cliente","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"numero_parte_cliente",label:"Producto","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"proyecto_producto.cantidad",label:"Cantidad",align:"center",width:"85"}}),e._v(" "),o("el-table-column",{attrs:{prop:"proyecto_producto.work_order",label:"Orden de Trabajo",align:"center",width:"85"}}),e._v(" "),o("el-table-column",{attrs:{prop:"proyecto_producto.item",label:"Item",align:"center",width:"85"}}),e._v(" "),e.checkPermission(["view finanzas ordenes abiertas"])?o("el-table-column",{attrs:{label:"Precio (pesos)",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.proyecto_producto.precio_pesos?o("vue-numeric",{attrs:{precision:2,currency:"$",separator:",","read-only":!0},model:{value:t.row.proyecto_producto.precio_pesos,callback:function(o){e.$set(t.row.proyecto_producto,"precio_pesos",o)},expression:"scope.row.proyecto_producto.precio_pesos"}}):o("span",[e._v("$ 0.00 ")])]}}],null,!1,345416065)}):e._e(),e._v(" "),e.checkPermission(["view finanzas ordenes abiertas"])?o("el-table-column",{attrs:{label:"Precio (dlls)",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.proyecto_producto.precio_dlls?o("vue-numeric",{attrs:{precision:2,currency:"$",separator:",","read-only":!0},model:{value:t.row.proyecto_producto.precio_dlls,callback:function(o){e.$set(t.row.proyecto_producto,"precio_dlls",o)},expression:"scope.row.proyecto_producto.precio_dlls"}}):o("span",[e._v("$ 0.00 ")])]}}],null,!1,2656912897)}):e._e()],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"end"}},[o("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChangePagination}})],1)],1)],1)],1)],1)],1)],1):e._e(),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"float-left",on:{click:function(t){e.clearFields(),e.close()}}},[e._v("Cancelar")]),e._v(" "),0==e.form.id?o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){return e.insert("form")}}},[e._v("Agregar")]):e._e(),e._v(" "),0!=e.form.id?o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){return e.insert("form")}}},[e._v("Guardar")]):e._e()],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.formTitle,id:"dialogProyectoProducto",visible:e.dialogoProyectoProductoEdit,width:"30%"},on:{"update:visible":function(t){e.dialogoProyectoProductoEdit=t}}},[o("el-form-item",{staticClass:"text-right"},[0==e.currentProyectoProducto.id?o("el-switch",{staticStyle:{display:"block"},attrs:{"active-value":1,"inactive-value":0,"active-color":"#409EFF","inactive-color":"#409EFF","active-text":e.agruparTexto,disabled:e.agruparDisabled},model:{value:e.currentProyectoProducto.agrupar,callback:function(t){e.$set(e.currentProyectoProducto,"agrupar",t)},expression:"currentProyectoProducto.agrupar"}}):e._e()],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[0!=e.currentProyectoProducto.id?o("el-form-item",{attrs:{label:"Producto"}},[e._v("\n                    "+e._s(e.currentProyectoProducto.nombre_producto)+"\n                ")]):e._e(),e._v(" "),0==e.currentProyectoProducto.id?o("el-form-item",{attrs:{label:"Producto"}},[o("el-select",{attrs:{"value-key":"id",filterable:""},model:{value:e.currentProyectoProducto.producto_id,callback:function(t){e.$set(e.currentProyectoProducto,"producto_id",t)},expression:"currentProyectoProducto.producto_id"}},e._l(e.productosSelect,(function(e){return o("el-option",{key:e.id,attrs:{label:e.numero_parte_cliente+" - "+e.nombre_producto,value:e.id,disabled:e.disabled}})})),1)],1):e._e()],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"Num. de parte Cliente"}},[o("el-input",{model:{value:e.currentProyectoProducto.numero_parte_cliente,callback:function(t){e.$set(e.currentProyectoProducto,"numero_parte_cliente",t)},expression:"currentProyectoProducto.numero_parte_cliente"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Cantidad"}},[o("el-input-number",{attrs:{min:1},model:{value:e.currentProyectoProducto.cantidad,callback:function(t){e.$set(e.currentProyectoProducto,"cantidad",t)},expression:"currentProyectoProducto.cantidad"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[e.checkPermission(["ver fecha entrega proyectos"])?o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Fecha de Entrega",prop:"fecha_entrega"}},[o("el-date-picker",{attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"]),type:"date",format:"dd-MMMM-yyyy"},model:{value:e.currentProyectoProducto.fecha_entrega,callback:function(t){e.$set(e.currentProyectoProducto,"fecha_entrega",t)},expression:"currentProyectoProducto.fecha_entrega"}})],1)],1):e._e(),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Fecha Promesa",prop:"fecha_promesa"}},[o("el-date-picker",{attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"]),type:"date",format:"dd-MMMM-yyyy"},model:{value:e.currentProyectoProducto.fecha_promesa,callback:function(t){e.$set(e.currentProyectoProducto,"fecha_promesa",t)},expression:"currentProyectoProducto.fecha_promesa"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Orden de Trabajo"}},[o("el-input",{model:{value:e.currentProyectoProducto.work_order,callback:function(t){e.$set(e.currentProyectoProducto,"work_order",t)},expression:"currentProyectoProducto.work_order"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Item"}},[o("el-input",{model:{value:e.currentProyectoProducto.item,callback:function(t){e.$set(e.currentProyectoProducto,"item",t)},expression:"currentProyectoProducto.item"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Precio (pesos)"}},[o("vue-numeric",{staticClass:"el-input__inner",attrs:{precision:2,currency:"$",separator:","},model:{value:e.currentProyectoProducto.precio_pesos,callback:function(t){e.$set(e.currentProyectoProducto,"precio_pesos",t)},expression:"currentProyectoProducto.precio_pesos"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Precio (dlls)"}},[o("vue-numeric",{staticClass:"el-input__inner",attrs:{precision:2,currency:"$",separator:","},model:{value:e.currentProyectoProducto.precio_dlls,callback:function(t){e.$set(e.currentProyectoProducto,"precio_dlls",t)},expression:"currentProyectoProducto.precio_dlls"}})],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"Heat Number",hidden:""}},[o("el-input",{model:{value:e.currentProyectoProducto.heat_number,callback:function(t){e.$set(e.currentProyectoProducto,"heat_number",t)},expression:"currentProyectoProducto.heat_number"}})],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){e.dialogoProyectoProductoEdit=!1}}},[e._v("Cancelar")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:e.updateOrCreateProyectoProducto}},[e._v("Guardar")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"Cambiar Plan de Corte",id:"dialogCambiarPlanCorte",visible:e.dialogoCambiarPlanCorte,width:"20%"},on:{"update:visible":function(t){e.dialogoCambiarPlanCorte=t}}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"Plan de Corte"}},[o("el-input",{model:{value:e.nuevoPlanCorte,callback:function(t){e.nuevoPlanCorte=t},expression:"nuevoPlanCorte"}})],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){e.dialogoCambiarPlanCorte=!1}}},[e._v("Cancelar")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:e.updatePlanCorte}},[e._v("Aplicar")])],1)],1)],1)}),[],!1,null,"7d9d1420",null).exports,z=new S.a("documentoTipo"),M={props:{csrf:{type:String},photourl:{type:String}},data:function(){return{imageUrl:"",fileList:[],form:{id:0,numero_parte:"",numero_parte_cliente:"",documentos:[]},dialogoAgregar:!1,dialogRef:"documentosDialog",dialogoDocumentos:!1,loadingImage:!1,imageFile:null,documentosTiposSelect:[],loadingTipoDocumentos:!1,documento_tipo_id:""}},methods:{checkPermission:f.a,open:function(){this.dialogoAgregar=!0,Object(f.a)(["ver finanzas proyectos"])||(this.form.documentos=this.form.documentos.filter((function(e){return 2!=e.documento_tipo_id})))},close:function(){this.dialogoAgregar=!1},clearFields:function(){this.form.id=0,this.form.documentos=[]},handleOpen:function(){this.dialogoDocumentos=!0,this.getDocumentoTipos()},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.dialogoDocumentos=!1})).catch((function(e){}))},getDocumentoTipos:function(){var e=this;return i()(n.a.mark((function t(){var o,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.list();case 2:o=t.sent,r=o.data,o.meta,console.log("DATA GET DOCUMENTO TIPO"),console.log(r),e.documentosTiposSelect=r;case 8:case"end":return t.stop()}}),t)})))()},deleteDocumento:function(e){var t=this;t.loading=!0;var o=this.$loading({target:"#dialogoListDocumento > .el-dialog"});axios.post("/proyectos/documentos/delete",{proyecto_id:t.form.id,documento_id:e.id}).then((function(r){t.form.documentos.map((function(e){return e.id})).indexOf(e.id);t.form.documentos=r.data.documentos,t.$message.success("Eliminado correctamente."),o.close()})).catch((function(e){t.$message.error("Hubo un error."),console.log(e)}))},submitUpload:function(){var e=this;if("undefined"==e.fileList[0]||null==e.fileList[0])return e.notificarError("Selecciona un archivo para subir"),!1;var t=this.$loading({target:"#dialogoAgregarDocumento > .el-dialog"}),o=new FormData;o.append("file",e.fileList[0].raw),o.append("proyecto_id",e.form.id),o.append("documento_tipo_id",e.documento_tipo_id),axios.post("/proyectos/documentos/store",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(o){e.$message.success("Guardado correctamente."),e.form.documentos=o.data.documentos,e.fileList=[],t.close(),e.dialogoDocumentos=!1})).catch((function(o){e.$message.error("Hubo un error."),console.log(o),t.close(),e.dialogoDocumentos=!1}))},handleProgress:function(e,t,o){t.raw.status="uploading"},handleSuccess:function(e,t,o){t.raw.status="success"},handleUploadChange:function(e,t){this.fileList=t.slice(-1)}}},j=Object(T.a)(M,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"150px"}},[o("el-dialog",{ref:e.dialogRef,attrs:{width:"40%",id:"dialogoListDocumento",visible:e.dialogoAgregar},on:{"update:visible":function(t){e.dialogoAgregar=t}}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("i",{staticClass:"el-icon-edit"}),e._v(" Documentos de Proyecto ")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.id,expression:"form.id"}],attrs:{hidden:""},domProps:{value:e.form.id},on:{input:function(t){t.target.composing||e.$set(e.form,"id",t.target.value)}}}),e._v(" "),o("span",{staticStyle:{"margin-right":"5px"}},[o("b",[e._v("Núm. de Parte (Local): ")]),e._v(" "+e._s(e.form.numero_parte))]),e._v(" "),o("span",{staticStyle:{"margin-right":"5px"}},[o("b",[e._v("Núm. de Parte (Cliente): ")]),e._v(" "+e._s(e.form.numero_parte_cliente))]),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"filter-container"},[o("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleOpen}},[e._v("Agregar")])],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.documentos,border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{type:"index",align:"center",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"nombre_real",label:"Documento","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"created_at",label:"Fecha de carga",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("moment")(t.row.created_at,"YYYY-MMM-DD"))+"\n                    ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"documento_tipo.nombre",label:"Tipo de Documento","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("a",{staticClass:"el-button el-button--primary el-button--mini",attrs:{type:"button",title:"descargar",href:"/proyectos/downloadDocumento/"+t.row.id}},[o("i",{staticClass:"el-icon-download"})]),e._v(" "),o("el-button",{attrs:{type:"danger",title:"eliminar",size:"mini",icon:"el-icon-delete"},on:{click:function(o){return e.deleteDocumento(t.row)}}})]}}])})],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"float-left",on:{click:function(t){e.clearFields(),e.dialogoAgregar=!1}}},[e._v("Cerrar")])],1)],1),e._v(" "),o("el-dialog",{attrs:{id:"dialogoAgregarDocumento",title:"Agregar Documento a Proyecto",visible:e.dialogoDocumentos,"before-close":e.handleClose,width:"23%"},on:{"update:visible":function(t){e.dialogoDocumentos=t}}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"Tipo de Documento",prop:"cliente_id"}},[o("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTipoDocumentos,expression:"loadingTipoDocumentos"}],attrs:{"value-key":"id"},model:{value:e.documento_tipo_id,callback:function(t){e.documento_tipo_id=t},expression:"documento_tipo_id"}},e._l(e.documentosTiposSelect,(function(e){return o("el-option",{key:e.id,attrs:{label:e.nombre,value:e.id}})})),1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"filter-container"},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","file-list":e.fileList,"auto-upload":!1,"on-change":e.handleUploadChange,"on-progress":e.handleProgress,"on-success":e.handleSuccess,drag:""}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[e._v("Arrastra un archivo aqui o "),o("em",[e._v("click para subir")])])])],1)])],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"float-left",on:{click:function(t){e.dialogoDocumentos=!1,e.fileList=[]}}},[e._v("Cancelar")]),e._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.submitUpload}},[e._v("Guardar")])],1)],1)],1)}),[],!1,null,null,null).exports,L=o("k9pt"),R={data:function(){return{listUrl:"/proyectos",deleteUrl:"/proyectos/delete",loading:!0,list:[],presearch:"",search:"",page:1,pageSize:10,total:0,currentRow:null,selectSearch:"numero_parte_cliente"}},computed:{searching:function(){var e=this;return this.search?(this.page=1,"nombre_cliente"==this.selectSearch?this.list.filter((function(t){return t.cliente.nombre_cliente.toLowerCase().includes(e.search.toLowerCase())})):this.list.filter((function(t){return t[e.selectSearch].toLowerCase().includes(e.search.toLowerCase())}))):(this.total=this.list.length,this.list)},displayData:function(){return this.total=this.searching.length,this.searching.slice(this.pageSize*this.page-this.pageSize,this.pageSize*this.page)},disableEditar:function(){return null==this.currentRow}},directives:{waves:m.a,permission:c.a,role:p.a},components:{formDialog:A,documentosDialog:j,Pagination:L.a},methods:{checkPermission:f.a,setCurrent:function(e){this.$refs.tableList.setCurrentRow(e)},handleCurrentChangeTable:function(e){this.currentRow=e},handleCurrentChangePagination:function(e){this.page=e},handlePresearchChange:function(){this.presearch||(this.search="")},handleSearch:function(){this.search=this.presearch},getList:function(){var e=this;return i()(n.a.mark((function t(){var o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=e).loading=!0,axios.get(o.listUrl).then((function(e){o.list=e.data,console.log(o.list),o.loading=!1})).catch((function(e){o.$message.error("Hubo un error."),console.log(e)}));case 3:case"end":return t.stop()}}),t)})))()},loadFieldsUpdate:function(e){this.$refs.myForm.form.id=e.id,this.$refs.myForm.form.cliente_id=e.cliente_id,this.$refs.myForm.form.cliente_nombre=e.cliente.nombre_cliente,this.$refs.myForm.form.numero_parte_cliente=e.numero_parte_cliente,this.$refs.myForm.form.numero_parte=e.numero_parte,this.$refs.myForm.form.orden_compra=e.orden_compra,this.$refs.myForm.form.plan_corte=e.plan_corte,this.$refs.myForm.form.fecha_entrega=e.fecha_entrega,this.$refs.myForm.form.fecha_promesa=e.fecha_promesa,this.$refs.myForm.form.productos=JSON.parse(JSON.stringify(e.productos)),this.$refs.myForm.open()},loadDocumentos:function(e){this.$refs.documentosDialog.form.id=e.id,this.$refs.documentosDialog.form.numero_parte=e.numero_parte,this.$refs.documentosDialog.form.numero_parte_cliente=e.numero_parte_cliente,this.$refs.documentosDialog.form.documentos=JSON.parse(JSON.stringify(e.documentos)),this.$refs.documentosDialog.open()},deleteRow:function(e,t){var o=this;this.$confirm("Esto eliminara permanentemente el proyecto "+t+". Quieres continuar?","Advertencia",{confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",type:"warning"}).then((function(){var t=o;t.loading=!0,axios.post(t.deleteUrl,{id:e}).then((function(e){t.getList(),t.$message.success("Eliminado correctamente."),t.loading=!1})).catch((function(e){t.$message.error("Hubo un error."),console.log(e),t.loading=!1}))})).catch((function(){o.$message({type:"info",message:"Eliminacion cancelada"})}))}},mounted:function(){this.getList()}},H=(o("FowT"),Object(T.a)(R,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-row",{attrs:{type:"flex"}}),e._v(" "),o("div",{staticClass:"filter-container"},[o("div",{staticClass:"filter-item",attrs:{id:"barra_busqueda"}},[o("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"buscar",clearable:""},on:{change:function(t){return e.handlePresearchChange()}},model:{value:e.presearch,callback:function(t){e.presearch=t},expression:"presearch"}},[o("el-select",{attrs:{slot:"prepend",size:"small",placeholder:"Select"},slot:"prepend",model:{value:e.selectSearch,callback:function(t){e.selectSearch=t},expression:"selectSearch"}},[o("el-option",{attrs:{label:"Nom. del Proyecto",value:"numero_parte_cliente"}}),e._v(" "),o("el-option",{attrs:{label:"Núm. de Parte (Local)",value:"numero_parte"}}),e._v(" "),o("el-option",{attrs:{label:"Cliente",value:"nombre_cliente"}})],1),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{slot:"append",size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1)],1),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["agregar proyectos"],expression:"['agregar proyectos']"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){e.$refs.myForm.clearFields(),e.$refs.myForm.open()}}},[e._v("Agregar")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-edit",disabled:e.disableEditar},on:{click:function(t){return e.loadFieldsUpdate(e.currentRow)}}},[e._v("Editar")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["ver documentos proyectos"],expression:"['ver documentos proyectos']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-document",disabled:e.disableEditar},on:{click:function(t){return e.loadDocumentos(e.currentRow)}}},[e._v("Documentos")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["eliminar proyectos"],expression:"['eliminar proyectos']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:e.disableEditar},on:{click:function(t){return e.deleteRow(e.currentRow.id,e.currentRow.numero_parte,e.currentRow.numero_parte_cliente)}}},[e._v("Eliminar")])],1),e._v(" "),o("el-row",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableList",staticStyle:{width:"100%"},attrs:{data:e.displayData,"highlight-current-row":"",border:"","tooltip-effect":"light",fit:""},on:{"current-change":e.handleCurrentChangeTable}},[o("el-table-column",{attrs:{prop:"numero_parte",label:"Núm. de Parte (Local)",width:"110",sortable:""}}),e._v(" "),o("el-table-column",{attrs:{prop:"orden_compra",label:"Orden de Compra","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"cliente.nombre_cliente",label:"Cliente","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"Progreso","show-overflow-tooltip":"",width:"260"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:parseInt(e.row.progreso)}})]}}])}),e._v(" "),e.checkPermission(["ver fecha entrega proyectos"])?o("el-table-column",{attrs:{label:"Fecha de Entrega","show-overflow-tooltip":"",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",[e._v("\n                        "+e._s(e._f("moment")(t.row.fecha_entrega,"DD-MMMM-YYYY"))+"\n                    ")])]}}],null,!1,724448769)}):e._e(),e._v(" "),o("el-table-column",{attrs:{label:"Fecha Promesa","show-overflow-tooltip":"",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",[e._v("\n                        "+e._s(e._f("moment")(t.row.fecha_promesa,"DD-MMMM-YYYY"))+"\n                    ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"totalHrsLabor",label:"Hrs Labor","show-overflow-tooltip":"",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"productos.length",label:"Productos","show-overflow-tooltip":"",align:"center"}})],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"end"}},[o("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChangePagination}})],1),e._v(" "),o("formDialog",{ref:"myForm"}),e._v(" "),o("documentosDialog",{ref:"documentosDialog"})],1)}),[],!1,null,null,null));t.default=H.exports},PJYZ:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},SI32:function(e,t,o){"use strict";var r=o("+H+N");o.n(r).a},SksO:function(e,t){function o(t,r){return e.exports=o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(t,r)}e.exports=o},Tlbl:function(e,t,o){var r=o("qr1n");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(r,n);r.locals&&(e.exports=r.locals)},VyIk:function(e,t,o){(t=o("JPst")(!1)).push([e.i,".waves-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background-color: rgba(0, 0, 0, 0.15);\n    background-clip: padding-box;\n    pointer-events: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n    opacity: 1;\n}\n\n.waves-ripple.z-active {\n    opacity: 0;\n    -webkit-transform: scale(2);\n    transform: scale(2);\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\n}",""]),e.exports=t},W8MJ:function(e,t){function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}},a1gu:function(e,t,o){var r=o("cDf5"),n=o("PJYZ");e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?n(e):t}},bHOZ:function(e,t,o){"use strict";var r=o("4Aq5");o.n(r).a},dzJH:function(e,t,o){(t=o("JPst")(!1)).push([e.i,"\n.color[data-v-7d9d1420] {\n    width: 100%;\n}\n#cliente_col + .el-input[data-v-7d9d1420] {\n    width: 100%;\n}\n.el-input-number--mini[data-v-7d9d1420] {\n    width: 100%;\n}\n.el-dialog .el-select[data-v-7d9d1420]{\n    width:430px;\n}\n",""]),e.exports=t},fJGn:function(e,t,o){"use strict";o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return c}));var r={props:{value:{type:Boolean,default:!1}},computed:{comment_disabled:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},n=o("KHd+"),a=Object(n.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dropdown",{attrs:{"show-timeout":100,trigger:"click"}},[o("el-button",{attrs:{plain:""}},[e._v("\n    "+e._s(e.comment_disabled?"Comment closed":"Comment opened")+"\n    "),o("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),o("el-dropdown-menu",{staticClass:"no-padding",attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",[o("el-radio-group",{staticStyle:{padding:"10px"},model:{value:e.comment_disabled,callback:function(t){e.comment_disabled=t},expression:"comment_disabled"}},[o("el-radio",{attrs:{label:!0}},[e._v("\n          Close comment\n        ")]),e._v(" "),o("el-radio",{attrs:{label:!1}},[e._v("\n          Open comment\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,i={props:{value:{required:!0,default:function(){return[]},type:Array}},data:function(){return{platformsOptions:[{key:"a-platform",name:"a-platform"},{key:"b-platform",name:"b-platform"},{key:"c-platform",name:"c-platform"}]}},computed:{platforms:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},s=Object(n.a)(i,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dropdown",{attrs:{"hide-on-click":!1,"show-timeout":100,trigger:"click"}},[o("el-button",{attrs:{plain:""}},[e._v("\n    Platform ("+e._s(e.platforms.length)+")\n    "),o("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),o("el-dropdown-menu",{staticClass:"no-border",attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-checkbox-group",{staticStyle:{padding:"5px 15px"},model:{value:e.platforms,callback:function(t){e.platforms=t},expression:"platforms"}},e._l(e.platformsOptions,(function(t){return o("el-checkbox",{key:t.key,attrs:{label:t.key}},[e._v("\n        "+e._s(t.name)+"\n      ")])})),1)],1)],1)}),[],!1,null,null,null).exports,l={props:{value:{type:String,default:""}},computed:{source_uri:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},c=Object(n.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dropdown",{attrs:{"show-timeout":100,trigger:"click"}},[o("el-button",{attrs:{plain:""}},[e._v("\n    External URL\n    "),o("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),o("el-dropdown-menu",{staticClass:"no-padding no-border",staticStyle:{width:"400px"},attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{"label-width":"0px",prop:"source_uri"}},[o("el-input",{attrs:{placeholder:"Enter the content"},model:{value:e.source_uri,callback:function(t){e.source_uri=t},expression:"source_uri"}},[o("template",{slot:"prepend"},[e._v("\n          Fill in the URL\n        ")])],2)],1)],1)],1)}),[],!1,null,null,null).exports},gmK0:function(e,t,o){"use strict";var r=o("g6NE"),n={inserted:function(e,t,o){var n=t.value,a=r.a.getters&&r.a.getters.roles;if(!(n&&n instanceof Array&&n.length>0))throw new Error("Roles are required! Example: v-role=\"['admin','editor']\"");var i=n;a.some((function(e){return i.includes(e)}))||e.parentNode&&e.parentNode.removeChild(e)}},a=function(e){e.directive("role",n)};window.Vue&&(window.role=n,Vue.use(a)),n.install=a;t.a=n},k9pt:function(e,t,o){"use strict";Math.easeInOutQuad=function(e,t,o,r){return(e/=r/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function n(e,t,o){var n=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,a=e-n,i=0;t=void 0===t?500:t;!function e(){i+=20;var s,l=Math.easeInOutQuad(i,n,a,t);s=l,document.documentElement.scrollTop=s,document.body.parentNode.scrollTop=s,document.body.scrollTop=s,i<t?r(e):o&&"function"==typeof o&&o()}()}var a={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,15,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&n(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&n(0,800)}}},i=(o("bHOZ"),o("KHd+")),s=Object(i.a)(a,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[o("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)}),[],!1,null,"68c28e9d",null);t.a=s.exports},lwsE:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},qr1n:function(e,t,o){(t=o("JPst")(!1)).push([e.i,"\n#barra_busqueda > .el-select .el-input {\n    width: 180px;\n}\n.input-with-select .el-input-group__prepend {\n    background-color: #fff;\n}\n.el-table .cell {\n    word-break: break-word;\n}\n\n",""]),e.exports=t}}]);