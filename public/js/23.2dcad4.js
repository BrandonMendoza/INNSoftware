(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"+Awk":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),s=n("rywy"),l=function(){function e(t){a()(this,e),this.uri=t}return i()(e,[{key:"list",value:function(e){return Object(s.a)({url:"/"+this.uri,method:"get",params:e})}},{key:"get",value:function(e){return Object(s.a)({url:"/"+this.uri+"/"+e,method:"get"})}},{key:"store",value:function(e){return Object(s.a)({url:"/"+this.uri,method:"post",data:e})}},{key:"update",value:function(e,t){return Object(s.a)({url:"/"+this.uri+"/"+e,method:"put",data:t})}},{key:"destroy",value:function(e){return Object(s.a)({url:"/"+this.uri+"/"+e,method:"delete"})}}]),e}()},"4Aq5":function(e,t,n){var r=n("EyLs");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,a);r.locals&&(e.exports=r.locals)},"5vkU":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),s=n("7W2i"),l=n.n(s),c=n("a1gu"),u=n.n(c),d=n("Nsbk"),p=n.n(d),f=n("rywy");function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var b=function(e){l()(n,e);var t=m(n);function n(){return a()(this,n),t.call(this,"proyectosProductos")}return i()(n,[{key:"arreglarListado",value:function(){return Object(f.a)({url:"/proyectosProductos/arreglarListado",method:"post"})}},{key:"store",value:function(e){return Object(f.a)({url:"/proyectosProductos/store",method:"post",data:e})}},{key:"updateMultiplePlanCorte",value:function(e){return Object(f.a)({url:"/proyectosProductos/updateMultiplePlanCorte",method:"post",data:e})}},{key:"deleteFromProject",value:function(e){return Object(f.a)({url:"/proyectosProductos/deleteFromProject",method:"post",data:e})}},{key:"deleteMultipleFromProject",value:function(e){return Object(f.a)({url:"/proyectosProductos/deleteMultipleFromProject",method:"post",data:e})}},{key:"getOrdenesAbiertasList",value:function(e){return Object(f.a)({url:"/proyectosProductos/getOrdenesAbiertasList",method:"get",params:e})}},{key:"getDocumentosFromOrden",value:function(e){return Object(f.a)({url:"/proyectosProductos/getDocumentosFromOrden",method:"get",params:e})}},{key:"OrdenesTerminadasSinEmbarcar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(f.a)({url:"/"+this.uri+"/"+e+"/OrdenesTerminadasSinEmbarcar",method:"get"})}},{key:"getOrdenesAbiertasByCliente",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(f.a)({url:"/"+this.uri+"/"+e+"/getOrdenesAbiertasByCliente",method:"get"})}}]),n}(n("+Awk").a)},"7W2i":function(e,t,n){var r=n("SksO");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},"7sWw":function(e,t,n){var r=n("VyIk");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,a);r.locals&&(e.exports=r.locals)},BYu5:function(e,t,n){"use strict";var r=n("PHCl");n.n(r).a},EyLs:function(e,t,n){(t=n("JPst")(!1)).push([e.i,"\n.pagination-container[data-v-68c28e9d] {\n  background: #fff;\n  padding: 32px 16px;\n}\n.pagination-container.hidden[data-v-68c28e9d] {\n  display: none;\n}\n",""]),e.exports=t},"HF+U":function(e,t,n){"use strict";n("7sWw");var r="@@wavesContext";function a(e,t){function n(n){var r=Object.assign({},t.value),a=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),o=a.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var i=o.getBoundingClientRect(),s=o.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":((s=document.createElement("span")).className="waves-ripple",s.style.height=s.style.width=Math.max(i.width,i.height)+"px",o.appendChild(s)),a.type){case"center":s.style.top=i.height/2-s.offsetHeight/2+"px",s.style.left=i.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(n.pageY-i.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(n.pageX-i.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=a.color,s.className="waves-ripple z-active",!1}}return e[r]?e[r].removeHandle=n:e[r]={removeHandle:n},n}var o={bind:function(e,t){e.addEventListener("click",a(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[r].removeHandle,!0),e.addEventListener("click",a(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[r].removeHandle,!1),e[r]=null,delete e[r]}},i=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(i)),o.install=i;t.a=o},Nsbk:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},PHCl:function(e,t,n){var r=n("i+JD");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,a);r.locals&&(e.exports=r.locals)},PJYZ:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},SksO:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},VyIk:function(e,t,n){(t=n("JPst")(!1)).push([e.i,".waves-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background-color: rgba(0, 0, 0, 0.15);\n    background-clip: padding-box;\n    pointer-events: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n    opacity: 1;\n}\n\n.waves-ripple.z-active {\n    opacity: 0;\n    -webkit-transform: scale(2);\n    transform: scale(2);\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\n}",""]),e.exports=t},Xut5:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),o=n("yXPU"),i=n.n(o),s=n("k9pt"),l=(n("wd/R"),n("7tbW"),n("2F5j"),n("HF+U")),c=n("5vkU"),u=n("+Awk"),d=new u.a("documentoTipo"),p=new u.a("perfilEmpresa"),f=new u.a("embarques"),m=new c.a("proyectosProductos"),b={name:"EmbarqueList",created:function(){this.getList()},destroyed:function(){},data:function(){return{listUrl:"/proyectosProductos",deleteUrl:"/proyectosProductos/delete",loading:!0,list:[],page:1,pageSize:10,total:0,selectSearch:"numero_parte_cliente",query:{page:1,limit:15,keyword:"",role:""},formVisible:!1,formTitle:"",activeName:"first",clientes:[],current:{id:0,cliente_id:0,cliente_nombre:"",fecha_salida:"",cantidad_bultos:"",compania_transporte:"",nombre_chofer:"",placas_transporte:"",documentos:[]},rules:{cliente_nombre:[{required:!0,message:"Selecciona un Cliente",trigger:"blur"}],fecha_salida:[{required:!0,message:"Ingresa una Fecha de Salida",trigger:"blur"}],cantidad_bultos:[{required:!0,message:"Ingresa una Cantidad de Bultos",trigger:"blur"}],compania_transporte:[{required:!0,message:"Ingresa una Compañía de Transporte",trigger:"blur"}],nombre_chofer:[{required:!0,message:"Ingresa un Nombre de Chofer",trigger:"blur"}]},ordenesAbiertasList:[],ordenesAbiertasSeleccionadas:[],ordenesAbiertasNuevas:[],OrdenesTodasList:[],agregarOrdenesVisible:!1,dialogoDocumentos:!1,dialogoDocumentosAgregarVisible:!1,fileList:[],loadingTipoDocumentos:!1,documentosTiposSelect:[{id:4,nombre:"Foto"},{id:5,nombre:"Otro"}],documento_tipo_id:"",perfil_empresa_list:[],dialogoPrePrint:!1,perfil_empresa:{id:0}}},components:{Pagination:s.a},directives:{waves:l.a},computed:{disableEditar:function(){return 0==this.current.id},disablePrint:function(){return 0==this.perfil_empresa.id}},methods:{getDocumentoTipos:function(){var e=this;return i()(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.list();case 2:n=t.sent,r=n.data,n.meta,e.documentosTiposSelect=r;case 6:case"end":return t.stop()}}),t)})))()},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.dialogoDocumentosAgregarVisible=!1})).catch((function(e){}))},handleAgregarDocumento:function(){this.dialogoDocumentosAgregarVisible=!0},submitUpload:function(){var e=this;if("undefined"==e.fileList[0]||null==e.fileList[0])return e.notificarError("Selecciona un archivo para subir"),!1;var t=this.$loading({target:"#dialogoAgregarDocumento > .el-dialog"}),n=new FormData;n.append("file",e.fileList[0].raw),n.append("embarque_id",e.current.id),n.append("documento_tipo_id",e.documento_tipo_id),axios.post("/embarques/documentos/store",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(n){e.$message.success("Guardado correctamente."),e.current.documentos=n.data.documentos,e.fileList=[],t.close(),e.dialogoDocumentosAgregarVisible=!1})).catch((function(n){e.$message.error("Hubo un error."),console.log(n),t.close(),e.dialogoDocumentosAgregarVisible=!1}))},deleteDocumento:function(e){var t=this;t.loading=!0;var n=this.$loading({target:"#dialogoAgregarDocumento > .el-dialog"});axios.post("/embarques/documentos/delete",{embarque_id:t.current.id,documento_id:e.id}).then((function(r){t.current.documentos.map((function(e){return e.id})).indexOf(e.id);t.current.documentos=r.data.documentos,t.$message.success("Eliminado correctamente."),n.close()})).catch((function(e){t.$message.error("Hubo un error."),console.log(e)}))},handleProgress:function(e,t,n){t.raw.status="uploading"},handleSuccess:function(e,t,n){t.raw.status="success"},handleUploadChange:function(e,t){this.fileList=t.slice(-1)},disableTabOrdenesAbiertasTerminadas:function(){0==this.current.cliente_id?(this.ordenesAbiertasList.forEach((function(e){e.disabled=!0})),this.ordenesAbiertasSeleccionadas.forEach((function(e){e.disabled=!0}))):(this.ordenesAbiertasList.forEach((function(e){e.disabled=!1})),this.ordenesAbiertasSeleccionadas.forEach((function(e){e.disabled=!1})))},getPerfilesEmpresa:function(){var e=this;return i()(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.list();case 2:n=t.sent,r=n.data,n.meta,e.perfil_empresa_list=r;case 6:case"end":return t.stop()}}),t)})))()},getClientes:function(){var e=this;axios.get("/clientes").then((function(t){e.clientes=t.data,e.loadingClientes=!1})).catch((function(t){e.$message.error("Hubo un error."),console.log(t)}))},changeCliente:function(){var e=this;""!=this.current.cliente_nombre?(this.clientes.forEach((function(t){t.nombre_cliente==e.current.cliente_nombre&&(e.current.cliente_id=t.id)})),this.getProyectosProductosList()):(this.current.cliente_id=0,this.ordenesAbiertasSeleccionadas=[]),this.disableTabOrdenesAbiertasTerminadas()},desembarcar:function(e){var t=this;this.$confirm("Esto eliminara permanentemente la orden del Embarque. Quieres continuar?","Advertencia",{confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",type:"warning"}).then((function(){t.ordenesAbiertasSeleccionadas.forEach((function(n){e.id==n.id&&t.ordenesAbiertasList.push({key:n.id,label:"Orden: "+n.numero_parte+" - "+n.producto.numero_parte_cliente,disabled:!1})}));var n=t.ordenesAbiertasSeleccionadas.map((function(e){return e.id})).indexOf(e.id);t.ordenesAbiertasSeleccionadas.splice(n,1)})).catch((function(){t.$message({type:"info",message:"Eliminacion cancelada"})}))},handleAddOrden:function(){this.agregarOrdenesVisible=!0},handleConfirmOrdenes:function(){var e=this;this.ordenesAbiertasNuevas.forEach((function(t){e.OrdenesTodasList.forEach((function(n){if(n.id==t){e.ordenesAbiertasSeleccionadas.push(n);var r=e.ordenesAbiertasList.map((function(e){return e.key})).indexOf(n.id);e.ordenesAbiertasList.splice(r,1)}}))})),this.ordenesAbiertasNuevas=[],this.agregarOrdenesVisible=!1,this.updateOrdenesAbiertasList()},updateOrdenesAbiertasList:function(){var e=this;this.ordenesAbiertasList.forEach((function(e){e.disabled=!1})),this.ordenesAbiertasList.forEach((function(t){e.ordenesAbiertasSeleccionadas.forEach((function(e){t.id==e.id&&(t.disabled=!0)}))}))},filterMethod:function(e,t){return t.initial.toLowerCase().indexOf(e.toLowerCase())>-1},handleChangeTransfer:function(){console.log(this.ordenesAbiertasSeleccionadas)},handleClick:function(e,t){},handleCreateForm:function(){this.formVisible=!0,this.formTitle="Agregar Nuevo Embarque",this.clearCurrent(),this.getClientes()},handleEditForm:function(){this.formTitle="Editar Embarque",this.getClientes(),this.getProyectosProductosList(),this.formVisible=!0},handleDocumentos:function(){this.dialogoDocumentos=!0},setCurrent:function(e){this.$refs.tableList.setCurrentRow(e)},handleCurrentChangeTable:function(e){console.log("CURRENT"),console.log(e),null!=e&&(this.current=e,this.current.cliente_nombre=e.cliente.nombre_cliente,this.ordenesAbiertasSeleccionadas=e.proyectos_productos)},handleFilter:function(){this.query.page=1,this.getList()},getList:function(){var e=this;return i()(a.a.mark((function t(){var n,r,o,i,s,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query,r=n.limit,o=n.page,e.loading=!0,t.next=4,f.list(e.query);case 4:i=t.sent,s=i.data,l=i.meta,console.log("GET LIST DATA"),console.log(s),e.list=s,e.list.forEach((function(e,t){e.index=(o-1)*r+t+1})),e.total=l.total,e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},getProyectosProductosList:function(){var e=this;return i()(a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$loading({target:"#embarqueTransfer"}),t.next=3,m.OrdenesTerminadasSinEmbarcar(e.current.cliente_id);case 3:r=t.sent,o=r.data,r.meta,e.ordenesAbiertasList=[],e.OrdenesTodasList=o,console.log("ORDENES ABIERTAS LIST/DATA"),console.log(e.ordenesAbiertasList),o.forEach((function(t){1==t.Proceso.proyecto_proceso.es_ultimo&&e.ordenesAbiertasList.push({key:t.id,label:"Orden: "+t.numero_parte+" - "+t.producto.numero_parte_cliente,disabled:!1})})),e.updateOrdenesAbiertasList(),n.close();case 13:case"end":return t.stop()}}),t)})))()},handleSubmit:function(){var e=this;if(0==this.ordenesAbiertasSeleccionadas.length)return this.$message.error("Debes agregar una Orden Terminada al Embarque"),!1;this.$refs.form.validate((function(t){if(!t)return!1;var n=e.$loading({target:".el-dialog"});f.store({current:e.current,ordenesSeleccionadas:e.ordenesAbiertasSeleccionadas.map((function(e){return e.id}))}).then((function(t){e.$message({message:"Embarque creado correctamente.",type:"success",duration:5e3}),e.formVisible=!1,e.clearCurrent(),e.getList(),n.close()})).catch((function(e){console.log(e),n.close()}))}))},deleteRow:function(e){var t=this;this.$confirm("Esto eliminara permanentemente la Orden Abierta. Quieres continuar?","Advertencia",{confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",type:"warning"}).then((function(){var n=t;n.loading=!0,axios.post(n.deleteUrl,{id:e}).then((function(e){n.getList(),n.$message.success("Eliminado correctamente."),n.loading=!1})).catch((function(e){n.$message.error("Hubo un error."),console.log(e),n.loading=!1}))})).catch((function(){t.$message({type:"info",message:"Eliminacion cancelada"})}))},clearCurrent:function(){this.setCurrent(),this.ordenesAbiertasSeleccionadas=[],this.current={id:0,cliente_id:0,fecha_salida:"",cantidad_bultos:"",compania_transporte:"",nombre_chofer:"",placas_transporte:""}},handlePrePrintForm:function(){this.dialogoPrePrint=!0,this.getPerfilesEmpresa()},handleClosePrePrint:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.dialogoPrePrint=!1})).catch((function(e){}))}}},g=(n("BYu5"),n("KHd+")),h=Object(g.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("div",{staticClass:"filter-item"},[n("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"buscar",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{slot:"append",size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter},slot:"append"})],1)],1),e._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleCreateForm()}}},[e._v(" "+e._s(e.$t("table.add"))+" ")]),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-edit",disabled:e.disableEditar},on:{click:function(t){return e.handleEditForm()}}},[e._v("Editar")]),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-document",disabled:e.disableEditar},on:{click:function(t){return e.handleDocumentos()}}},[e._v("Documentos")]),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:!0},on:{click:function(t){return e.deleteRow(e.current)}}},[e._v("Eliminar")]),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",disabled:e.disableEditar},on:{click:function(t){return e.handlePrePrintForm()}}},[e._v("Generar Hoja de Salida")])],1),e._v(" "),n("el-row",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableList",staticStyle:{width:"100%","word-wrap":"break-word"},attrs:{data:e.list,"highlight-current-row":"",sortable:"",border:"","tooltip-effect":"light",fit:""},on:{"current-change":e.handleCurrentChangeTable}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.proyectos_productos,(function(t,r){return n("li",[n("p",[e._v("Numero de Parte (Local): "+e._s(t.numero_parte)+" - Numero de Parte (Cliente): "+e._s(t.producto.numero_parte_cliente))])])}))}}])}),e._v(" "),n("af-table-column",{attrs:{type:"index",align:"center",sortable:"",fixed:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"fecha_salida",label:"Fecha de Salida","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"cantidad_bultos",label:"Cantidad de Bultos",align:"center","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"compania_transporte",label:"Compañia de Transporte","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"nombre_chofer",label:"Nombre del Chofer","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"placas_transporte",label:"Placas",align:"center","show-overflow-tooltip":""}})],1)],1),e._v(" "),n("el-row",{attrs:{type:"flex",justify:"end"}},[n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{layout:"prev, pager, next",total:e.total,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.getList}})],1),e._v(" "),n("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"60%"},on:{"update:visible":function(t){e.formVisible=t}}},[n("div",{staticClass:"form-container"},[n("el-form",{ref:"form",attrs:{model:e.current,rules:e.rules,"label-position":"top","label-width":"150px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"Fecha de Salida",prop:"fecha_salida"}},[n("el-date-picker",{attrs:{type:"date"},model:{value:e.current.fecha_salida,callback:function(t){e.$set(e.current,"fecha_salida",t)},expression:"current.fecha_salida"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"Cliente",prop:"cliente_nombre"}},[n("el-select",{attrs:{"value-key":"nombre_cliente",clearable:"",filterable:""},on:{change:function(t){return e.changeCliente()}},model:{value:e.current.cliente_nombre,callback:function(t){e.$set(e.current,"cliente_nombre",t)},expression:"current.cliente_nombre"}},e._l(e.clientes,(function(e){return n("el-option",{key:e.id,attrs:{label:e.nombre_cliente,value:e.nombre_cliente}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"Cantidad de Bultos",prop:"cantidad_bultos"}},[n("el-input-number",{attrs:{min:1},model:{value:e.current.cantidad_bultos,callback:function(t){e.$set(e.current,"cantidad_bultos",t)},expression:"current.cantidad_bultos"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}})],1),e._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"Compañía de Transporte",prop:"compania_transporte"}},[n("el-input",{model:{value:e.current.compania_transporte,callback:function(t){e.$set(e.current,"compania_transporte",t)},expression:"current.compania_transporte"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"Nombre del Chofer",prop:"nombre_chofer"}},[n("el-input",{model:{value:e.current.nombre_chofer,callback:function(t){e.$set(e.current,"nombre_chofer",t)},expression:"current.nombre_chofer"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"Placas del Vehiculo",prop:"placas_transporte"}},[n("el-input",{model:{value:e.current.placas_transporte,callback:function(t){e.$set(e.current,"placas_transporte",t)},expression:"current.placas_transporte"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}})],1),e._v(" "),n("el-row",[n("el-col",[n("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"Ordenes Terminadas",name:"first"}},[n("el-row",[n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleAddOrden()}}},[e._v("\n                                            Agregar Orden\n                                        ")])],1)]),e._v(" "),n("el-row",{attrs:{type:"flex",justify:"space-around",id:"embarqueTransfer"}},[n("el-col",[n("el-table",{ref:"ordenesSeleccionadas",staticStyle:{width:"100%","word-wrap":"break-word"},attrs:{data:e.ordenesAbiertasSeleccionadas,sortable:"",border:"","tooltip-effect":"light",fit:""}},[n("af-table-column",{attrs:{type:"index",align:"center",sortable:"",fixed:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"numero_parte",label:"Numero de Parte","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"producto.numero_parte_cliente",label:"Numero de Parte (Cliente)","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.desembarcar(t.row)}}})]}}])})],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"float-left",on:{click:function(t){e.formVisible=!1}}},[e._v("Cancelar")]),e._v(" "),n("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){return e.handleSubmit()}}},[e._v("Confirmar")])],1)]),e._v(" "),n("el-dialog",{attrs:{title:"Agregar Ordenes",visible:e.agregarOrdenesVisible,width:"60%"},on:{"update:visible":function(t){e.agregarOrdenesVisible=t}}},[n("div",{staticClass:"form-container"},[n("el-transfer",{attrs:{titles:["Ordenes Terminadas","Embarque"],"button-texts":["Quitar","Embarcar"],data:e.ordenesAbiertasList},on:{change:e.handleChangeTransfer},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.option;return n("span",{},[e._v(e._s(r.label))])}}]),model:{value:e.ordenesAbiertasNuevas,callback:function(t){e.ordenesAbiertasNuevas=t},expression:"ordenesAbiertasNuevas"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"float-left",on:{click:function(t){e.agregarOrdenesVisible=!1}}},[e._v("Cancelar")]),e._v(" "),n("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){return e.handleConfirmOrdenes()}}},[e._v("Confirmar")])],1)]),e._v(" "),n("el-dialog",{attrs:{id:"dialogoPrePrint",title:"Generar Hoja de Salida",visible:e.dialogoPrePrint,width:"23%"},on:{"update:visible":function(t){e.dialogoPrePrint=t}}},[n("el-row",[n("el-col",[e._v("\n                    Perfil de Empresa:\n                    "),n("el-select",{attrs:{"value-key":"id"},model:{value:e.perfil_empresa,callback:function(t){e.perfil_empresa=t},expression:"perfil_empresa"}},e._l(e.perfil_empresa_list,(function(e){return n("el-option",{key:e.id,attrs:{label:e.nombre_corto,value:e}})})),1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"float-left",attrs:{size:"small"},on:{click:function(t){e.dialogoPrePrint=!1,e.fileList=[]}}},[e._v("Cancelar")]),e._v(" "),n("router-link",{attrs:{target:"_blank",to:{name:"hoja_de_salida_download",params:{id:e.current.id,perfil_empresa:JSON.stringify(e.perfil_empresa)}}}},[n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",disabled:e.disablePrint}},[e._v("\n                    Generar Hoja de Salida\n                ")])],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{width:"50%",id:"dialogoListDocumento",visible:e.dialogoDocumentos},on:{"update:visible":function(t){e.dialogoDocumentos=t}}},[n("span",{attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-document"}),e._v(" Documentos\n        ")]),e._v(" "),n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.handleAgregarDocumento}},[e._v("Agregar")])],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.current.documentos,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{type:"index",align:"center",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nombre_real",label:"Documento","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"documento_tipo.nombre",label:"Tipo de Documento","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"usuario.name",label:"Cargado Por","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"created_at",label:"Fecha de carga",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("moment")(t.row.created_at,"YYYY-MMM-DD, h:mm a"))+"\n                ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("a",{staticClass:"el-button el-button--primary el-button--mini",attrs:{type:"button",title:"descargar",href:"/embarques/downloadDocumento/"+t.row.id}},[n("i",{staticClass:"el-icon-download"})]),e._v(" "),n("el-button",{attrs:{type:"danger",title:"eliminar",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.deleteDocumento(t.row)}}})]}}])})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"float-left",on:{click:function(t){e.dialogoDocumentos=!1}}},[e._v("Cerrar")])],1)],1),e._v(" "),n("el-dialog",{attrs:{id:"dialogoAgregarDocumento",title:"Agregar Documento a Embarque",visible:e.dialogoDocumentosAgregarVisible,"before-close":e.handleClose,width:"23%"},on:{"update:visible":function(t){e.dialogoDocumentosAgregarVisible=t}}},[n("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[e._v("\n                Tipo de Documento\n            ")])],1),e._v(" "),n("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTipoDocumentos,expression:"loadingTipoDocumentos"}],attrs:{"value-key":"id"},model:{value:e.documento_tipo_id,callback:function(t){e.documento_tipo_id=t},expression:"documento_tipo_id"}},e._l(e.documentosTiposSelect,(function(e){return n("el-option",{key:e.id,attrs:{label:e.nombre,value:e.id}})})),1)],1)],1),e._v(" "),n("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"filter-container"},[n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","file-list":e.fileList,"auto-upload":!1,"on-change":e.handleUploadChange,"on-progress":e.handleProgress,"on-success":e.handleSuccess,drag:""}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("Arrastra un archivo aqui o "),n("em",[e._v("click para subir")])])])],1)])],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"float-left",on:{click:function(t){e.dialogoDocumentosAgregarVisible=!1,e.fileList=[]}}},[e._v("Cancelar")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.submitUpload}},[e._v("Guardar")])],1)],1)],1)}),[],!1,null,null,null);t.default=h.exports},a1gu:function(e,t,n){var r=n("cDf5"),a=n("PJYZ");e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},bHOZ:function(e,t,n){"use strict";var r=n("4Aq5");n.n(r).a},"i+JD":function(e,t,n){(t=n("JPst")(!1)).push([e.i,"\n.el-select .el-input {\n    width: 180px;\n}\n.el-transfer-panel{\n    width: 35%;\n}\n.input-with-select .el-input-group__prepend {\n    background-color: #fff;\n}\n.pre-formateado {\n    white-space: pre;\n}\n.el-table .cell {\n    word-break: break-word;\n}\n\n\n",""]),e.exports=t},k9pt:function(e,t,n){"use strict";Math.easeInOutQuad=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function a(e,t,n){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=e-a,i=0;t=void 0===t?500:t;!function e(){i+=20;var s,l=Math.easeInOutQuad(i,a,o,t);s=l,document.documentElement.scrollTop=s,document.body.parentNode.scrollTop=s,document.body.scrollTop=s,i<t?r(e):n&&"function"==typeof n&&n()}()}var o={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,15,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&a(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&a(0,800)}}},i=(n("bHOZ"),n("KHd+")),s=Object(i.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)}),[],!1,null,"68c28e9d",null);t.a=s.exports}}]);