(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"+Awk":function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var r=o("lwsE"),a=o.n(r),n=o("W8MJ"),i=o.n(n),s=o("rywy"),c=function(){function e(t){a()(this,e),this.uri=t}return i()(e,[{key:"list",value:function(e){return Object(s.a)({url:"/"+this.uri,method:"get",params:e})}},{key:"get",value:function(e){return Object(s.a)({url:"/"+this.uri+"/"+e,method:"get"})}},{key:"store",value:function(e){return Object(s.a)({url:"/"+this.uri,method:"post",data:e})}},{key:"update",value:function(e,t){return Object(s.a)({url:"/"+this.uri+"/"+e,method:"put",data:t})}},{key:"destroy",value:function(e){return Object(s.a)({url:"/"+this.uri+"/"+e,method:"delete"})}}]),e}()},"4Aq5":function(e,t,o){var r=o("EyLs");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(r,a);r.locals&&(e.exports=r.locals)},"5vkU":function(e,t,o){"use strict";o.d(t,"a",(function(){return g}));var r=o("lwsE"),a=o.n(r),n=o("W8MJ"),i=o.n(n),s=o("7W2i"),c=o.n(s),l=o("a1gu"),u=o.n(l),d=o("Nsbk"),p=o.n(d),m=o("rywy");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=p()(e);if(t){var a=p()(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return u()(this,o)}}var g=function(e){c()(o,e);var t=f(o);function o(){return a()(this,o),t.call(this,"proyectosProductos")}return i()(o,[{key:"arreglarListado",value:function(){return Object(m.a)({url:"/proyectosProductos/arreglarListado",method:"post"})}},{key:"store",value:function(e){return Object(m.a)({url:"/proyectosProductos/store",method:"post",data:e})}},{key:"updateMultiplePlanCorte",value:function(e){return Object(m.a)({url:"/proyectosProductos/updateMultiplePlanCorte",method:"post",data:e})}},{key:"deleteFromProject",value:function(e){return Object(m.a)({url:"/proyectosProductos/deleteFromProject",method:"post",data:e})}},{key:"deleteMultipleFromProject",value:function(e){return Object(m.a)({url:"/proyectosProductos/deleteMultipleFromProject",method:"post",data:e})}},{key:"getOrdenesAbiertasList",value:function(e){return Object(m.a)({url:"/proyectosProductos/getOrdenesAbiertasList",method:"get",params:e})}},{key:"getDocumentosFromOrden",value:function(e){return Object(m.a)({url:"/proyectosProductos/getDocumentosFromOrden",method:"get",params:e})}},{key:"OrdenesTerminadasSinEmbarcar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(m.a)({url:"/"+this.uri+"/"+e+"/OrdenesTerminadasSinEmbarcar",method:"get"})}},{key:"getOrdenesAbiertasByCliente",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(m.a)({url:"/"+this.uri+"/"+e+"/getOrdenesAbiertasByCliente",method:"get"})}}]),o}(o("+Awk").a)},"7sWw":function(e,t,o){var r=o("VyIk");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(r,a);r.locals&&(e.exports=r.locals)},EyLs:function(e,t,o){(t=o("JPst")(!1)).push([e.i,"\n.pagination-container[data-v-68c28e9d] {\n  background: #fff;\n  padding: 32px 16px;\n}\n.pagination-container.hidden[data-v-68c28e9d] {\n  display: none;\n}\n",""]),e.exports=t},GczY:function(e,t,o){"use strict";var r=o("g6NE"),a={inserted:function(e,t,o){var a=t.value,n=r.a.getters&&r.a.getters.permissions;if(!(a&&a instanceof Array&&a.length>0))throw new Error("Permissions are required! Example: v-permission=\"['manage user','manage permission']\"");var i=a;n.some((function(e){return i.includes(e)}))||e.parentNode&&e.parentNode.removeChild(e)}},n=function(e){e.directive("permission",a)};window.Vue&&(window.permission=a,Vue.use(n)),a.install=n;t.a=a},"HF+U":function(e,t,o){"use strict";o("7sWw");var r="@@wavesContext";function a(e,t){function o(o){var r=Object.assign({},t.value),a=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),n=a.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var i=n.getBoundingClientRect(),s=n.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":((s=document.createElement("span")).className="waves-ripple",s.style.height=s.style.width=Math.max(i.width,i.height)+"px",n.appendChild(s)),a.type){case"center":s.style.top=i.height/2-s.offsetHeight/2+"px",s.style.left=i.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(o.pageY-i.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(o.pageX-i.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=a.color,s.className="waves-ripple z-active",!1}}return e[r]?e[r].removeHandle=o:e[r]={removeHandle:o},o}var n={bind:function(e,t){e.addEventListener("click",a(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[r].removeHandle,!0),e.addEventListener("click",a(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[r].removeHandle,!1),e[r]=null,delete e[r]}},i=function(e){e.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(i)),n.install=i;t.a=n},KUbc:function(e,t,o){"use strict";o.r(t);var r=o("2mBW"),a=o.n(r),n=o("o0o1"),i=o.n(n),s=o("yXPU"),c=o.n(s),l=(o("fJGn"),o("wd/R")),u=o.n(l),d=(o("2F5j"),o("HF+U")),p=o("GczY"),m=o("gmK0"),f=o("OuqF"),g={data:function(){return{clientes:[],productosSelect:[],activeName:"first",form:{id:0,numero_parte:"",cantidad:"",fecha_entrega:"",fecha_promesa:"",item:"",work_order:"",heat_number:"",proyecto:"",producto:"",producto_local:"",notas:"",precio_pesos:"",precio_dlls:"",plan_corte:"",documentos:[]},rules:{},dialogoAgregar:!1,dialogRef:"myForm",dialogoProductos:!1,loadingCliente:!1,dialogoDocumentos:!1,fileList:[]}},directives:{waves:d.a,permission:p.a,role:m.a},methods:{checkPermission:f.a,open:function(){this.activeName="first",this.dialogoAgregar=!0},close:function(){this.$parent.setCurrent(),this.dialogoAgregar=!1},insert:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var o=t.$loading({target:".el-dialog"}),r=t;axios.put("/proyectosProductos/insert",r.form).then((function(e){console.log("Response:"),console.log(e),r.$parent.getList(),r.clearFields(),r.close(),o.close(),r.$message.success("Guardado correctamente.")})).catch((function(e){r.$message.error("Hubo un error."),console.log(e)}))}))},clearFields:function(){this.form.id=0,this.form.numero_parte="",this.form.cantidad="",this.form.item="",this.form.work_order="",this.form.heat_number="",this.form.notas="",this.form.proyecto="",this.form.producto="",this.form.producto_local="",this.form.fecha_entrega=u()(),this.form.fecha_promesa=u()(),this.form.precio_pesos=0,this.form.precio_dlls=0,this.form.plan_corte=""},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.clearFields(),t.close()})).catch((function(e){}))},handleClick:function(e,t){}}},h=(o("UeUD"),o("KHd+")),v=Object(h.a)(g,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top","label-width":"150px"}},[o("el-dialog",{ref:e.dialogRef,attrs:{width:"30%","before-close":e.handleClose,visible:e.dialogoAgregar},on:{"update:visible":function(t){e.dialogoAgregar=t}}},[0==e.form.id?o("span",{attrs:{slot:"title"},slot:"title"},[o("i",{staticClass:"el-icon-plus"}),e._v(" Agregar Orden Abierta")]):e._e(),e._v(" "),0!=e.form.id?o("span",{attrs:{slot:"title"},slot:"title"},[o("i",{staticClass:"el-icon-edit"}),e._v(" Editar Orden Abierta ")]):e._e(),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.id,expression:"form.id"}],attrs:{hidden:""},domProps:{value:e.form.id},on:{input:function(t){t.target.composing||e.$set(e.form,"id",t.target.value)}}}),e._v(" "),o("span",{staticStyle:{"margin-right":"5px"}},[o("b",[e._v("Orden: ")]),e._v(" "+e._s(e.form.numero_parte))]),e._v(" "),o("span",{staticStyle:{"margin-right":"5px"}},[o("b",[e._v("Proyecto: ")]),e._v(" "+e._s(e.form.proyecto))]),e._v(" "),o("br"),e._v(" "),o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"General",name:"first"}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Producto"}},[e._v("\n                                    "+e._s(e.form.producto_local)+"/"+e._s(e.form.producto)+"\n                                ")])],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Cantidad"}},[o("el-input-number",{attrs:{min:1},model:{value:e.form.cantidad,callback:function(t){e.$set(e.form,"cantidad",t)},expression:"form.cantidad"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[e.checkPermission(["ver fecha entrega proyectos"])?o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Fecha de Entrega",prop:"fecha_entrega"}},[o("el-date-picker",{attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"]),type:"date"},model:{value:e.form.fecha_entrega,callback:function(t){e.$set(e.form,"fecha_entrega",t)},expression:"form.fecha_entrega"}})],1)],1):e._e(),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Fecha Promesa",prop:"fecha_promesa"}},[o("el-date-picker",{attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"]),type:"date"},model:{value:e.form.fecha_promesa,callback:function(t){e.$set(e.form,"fecha_promesa",t)},expression:"form.fecha_promesa"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Orden de Trabajo"}},[o("el-input",{attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"])},model:{value:e.form.work_order,callback:function(t){e.$set(e.form,"work_order",t)},expression:"form.work_order"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Item"}},[o("el-input",{attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"])},model:{value:e.form.item,callback:function(t){e.$set(e.form,"item",t)},expression:"form.item"}})],1)],1)],1),e._v(" "),o("el-row",{directives:[{name:"permission",rawName:"v-permission",value:["view finanzas"],expression:"['view finanzas']"}],attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Precio (pesos)"}},[o("vue-numeric",{staticClass:"el-input__inner",attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"]),precision:2,currency:"$",separator:","},model:{value:e.form.precio_pesos,callback:function(t){e.$set(e.form,"precio_pesos",t)},expression:"form.precio_pesos"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Precio (dlls)"}},[o("vue-numeric",{staticClass:"el-input__inner",attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"]),precision:2,currency:"$",separator:","},model:{value:e.form.precio_dlls,callback:function(t){e.$set(e.form,"precio_dlls",t)},expression:"form.precio_dlls"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"Plan de Corte"}},[o("el-input",{attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"])},model:{value:e.form.plan_corte,callback:function(t){e.$set(e.form,"plan_corte",t)},expression:"form.plan_corte"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}})],1),e._v(" "),o("el-form-item",{attrs:{label:"Heat Number",hidden:""}},[o("el-input",{attrs:{disabled:!e.checkPermission(["editar ordenes abiertas"])},model:{value:e.form.heat_number,callback:function(t){e.$set(e.form,"heat_number",t)},expression:"form.heat_number"}})],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"float-left",on:{click:function(t){e.clearFields(),e.close()}}},[e._v("Cancelar")]),e._v(" "),0==e.form.id?o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){return e.insert("form")}}},[e._v("Agregar")]):e._e(),e._v(" "),0!=e.form.id?o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){return e.insert("form")}}},[e._v("Guardar")]):e._e()],1)],1)],1)}),[],!1,null,"3c3ffa0e",null).exports,b=o("5vkU"),y=new b.a("proyectosProductos"),w={props:{csrf:{type:String},photourl:{type:String}},data:function(){return{imageUrl:"",fileList:[],form:{id:0,numero_parte:"",numero_parte_cliente:"",documentos:[]},dialogoAgregar:!1,dialogRef:"documentosDialog",dialogoDocumentos:!1,loadingImage:!1,imageFile:null,query:{proyecto_producto_id:0}}},methods:{open:function(){this.dialogoAgregar=!0,this.getList()},close:function(){this.dialogoAgregar=!1},clearFields:function(){this.form.id=0,this.form.documentos=[]},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.dialogoDocumentos=!1})).catch((function(e){}))},notificarSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Agregado correctamente.";this.$message({message:e,type:"success"})},notificarError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Hubo un error.";this.$message.error({message:e})},getList:function(){var e=this;return c()(i.a.mark((function t(){var o,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,y.getDocumentosFromOrden(e.query);case 3:o=t.sent,r=o.data,console.log("DATA DOCS:"),console.log(r),e.form.documentos=r[0].documentos,e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},deleteDocumento:function(e){var t=this;t.loading=!0;var o=this.$loading({target:"#dialogoListDocumento > .el-dialog"});axios.post("/proyectosProductos/documentos/delete",{proyecto_producto_id:t.form.id,documento_id:e.id}).then((function(r){t.form.documentos.map((function(e){return e.id})).indexOf(e.id);t.form.documentos=r.data.documentos,t.$message.success("Eliminado correctamente."),o.close()})).catch((function(e){t.$message.error("Hubo un error."),console.log(e)}))},submitUpload:function(){var e=this;if("undefined"==e.fileList[0]||null==e.fileList[0])return e.notificarError("Selecciona un archivo para subir"),!1;var t=this.$loading({target:"#dialogoAgregarDocumento > .el-dialog"}),o=new FormData;o.append("file",e.fileList[0].raw),o.append("proyecto_producto_id",e.form.id),axios.post("/proyectosProductos/documentos/store",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(o){e.$message.success("Guardado correctamente."),e.form.documentos=o.data.documentos,e.fileList=[],t.close(),e.dialogoDocumentos=!1})).catch((function(o){e.$message.error("Hubo un error."),console.log(o),t.close(),e.dialogoDocumentos=!1}))},handleProgress:function(e,t,o){t.raw.status="uploading"},handleSuccess:function(e,t,o){t.raw.status="success"},handleUploadChange:function(e,t){this.fileList=t.slice(-1)}}},C=Object(h.a)(w,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"150px"}},[o("el-dialog",{ref:e.dialogRef,attrs:{width:"40%",id:"dialogoListDocumento",visible:e.dialogoAgregar},on:{"update:visible":function(t){e.dialogoAgregar=t}}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("i",{staticClass:"el-icon-edit"}),e._v(" Documentos de Producto ")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.id,expression:"form.id"}],attrs:{hidden:""},domProps:{value:e.form.id},on:{input:function(t){t.target.composing||e.$set(e.form,"id",t.target.value)}}}),e._v(" "),o("span",{staticStyle:{"margin-right":"5px"}},[o("b",[e._v("Proyecto: ")]),e._v(" "+e._s(e.form.proyecto))]),e._v(" "),o("span",[o("b",[e._v("Producto: ")]),e._v(" "+e._s(e.form.producto)+"/"+e._s(e.form.producto_local))]),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"filter-container"},[o("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){e.dialogoDocumentos=!0}}},[e._v("Agregar")])],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.documentos,border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{type:"index",align:"center",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"nombre_real",label:"Documento","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"created_at",label:"Fecha de carga",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("moment")(t.row.created_at,"YYYY-MMM-DD"))+"\n                ")]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("a",{staticClass:"el-button el-button--primary el-button--mini",attrs:{type:"button",title:"descargar",href:"/proyectosProductos/downloadDocumento/"+t.row.id}},[o("i",{staticClass:"el-icon-download"})]),e._v(" "),o("el-button",{attrs:{type:"danger",title:"eliminar",size:"mini",icon:"el-icon-delete"},on:{click:function(o){return e.deleteDocumento(t.row)}}})]}}])})],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"float-left",on:{click:function(t){e.clearFields(),e.dialogoAgregar=!1}}},[e._v("Cerrar")])],1)],1),e._v(" "),o("el-dialog",{attrs:{id:"dialogoAgregarDocumento",title:"Agregar Documento a Orden",visible:e.dialogoDocumentos,"before-close":e.handleClose,width:"23%"},on:{"update:visible":function(t){e.dialogoDocumentos=t}}},[o("div",{staticClass:"filter-container"},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","file-list":e.fileList,"auto-upload":!1,"on-change":e.handleUploadChange,"on-progress":e.handleProgress,"on-success":e.handleSuccess,drag:""}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[e._v("Arrastra un archivo aqui o "),o("em",[e._v("click para subir")])])])],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"float-left",on:{click:function(t){e.dialogoDocumentos=!1,e.fileList=[]}}},[e._v("Cancelar")]),e._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.submitUpload}},[e._v("Guardar")])],1)])],1)}),[],!1,null,null,null).exports,P=o("k9pt");function k(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw n}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var S={data:function(){return{orden:0,ordenMax:0,percentage:0,procesoActual:"",procesoPrimero:[],procesoUltimo:[],procesos:[],listQuery:{page:1,limit:5,importance:void 0,title:void 0,type:void 0,sort:"+id"},form:{id:0,numero_parte:"",numero_parte_cliente:"",proyecto_id:0,proceso_actual:0,proceso_nuevo:0},dialogoAgregar:!1,dialogRef:"cambiarProcesoDialog",dialogoDocumentos:!1,dialogoHistorial:!1,historial:[]}},components:{Pagination:P.a},methods:{open:function(){this.getProcesos(),this.dialogoAgregar=!0},close:function(){this.dialogoAgregar=!1},clearFields:function(){this.form.id=0,this.form.documentos=[]},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.dialogoAgregar=!1})).catch((function(e){}))},increaseDecrease:function(e){this.orden+=e,this.orden>this.ordenMax+1?this.orden=this.ordenMax+1:this.orden<0&&(this.orden=0),this.calcularPorcentaje()},guardarProceso:function(){var e=this.$loading({target:"#dialogoCambiarProceso > .el-dialog"});if(this.form.proceso_actual==this.form.proceso_nuevo)return this.$message("Nada que guardar."),e.close(),this.close(),!1;var t=this;axios.put("/proyectosProductos/saveProceso",t.form).then((function(o){t.$parent.getList(),e.close(),t.close()})).catch((function(o){t.close(),e.close(),t.$message.error("Hubo un error."),console.log(o)}))},getProcesos:function(){var e=this,t=this.$loading({target:"#dialogoCambiarProceso > .el-dialog"});axios.put("/proyectosProductos/getProcesosByProducto",e.form).then((function(o){console.log("RESPUESTA: "),console.log(o),e.procesos=o.data.procesos,e.procesoActual=o.data.lastProceso.proyecto_proceso,e.form.proceso_actual=o.data.lastProceso.proyecto_proceso.id,e.form.proceso_nuevo=o.data.lastProceso.proyecto_proceso.id,e.procesoPrimero=o.data.procesoPrimero,e.procesoUltimo=o.data.procesoUltimo,e.ordenMax=Math.max.apply(Math,e.procesos.map((function(e){return e.orden}))),1==e.procesoActual.es_primero?e.orden=0:1==e.procesoActual.es_ultimo?e.orden=e.ordenMax+1:(console.log("PROCESO ACTUAL"),console.log(e.procesoActual),e.orden=e.procesoActual.orden),e.calcularPorcentaje(),t.close()})).catch((function(o){e.close(),t.close(),e.$message.error("Hubo un error."),console.log(o)}))},calcularPorcentaje:function(){this.percentage=0;if(0==this.orden)return this.percentage=0,this.procesoActual=this.procesoPrimero.proceso,this.form.proceso_nuevo=this.procesoPrimero.id,!1;if(this.orden==this.ordenMax+1)return this.percentage=100,this.procesoActual=this.procesoUltimo.proceso,this.form.proceso_nuevo=this.procesoUltimo.id,!1;console.log("FOR PROCESOS: ----");var e,t=k(this.procesos);try{for(t.s();!(e=t.n()).done;){var o=e.value;if(0!=parseInt(o.porcentaje)&&(this.percentage+=parseInt(o.porcentaje)),console.log("---------------------"),console.log(o),console.log(this.orden),this.orden==o.orden)return this.procesoActual=o.proceso,this.form.proceso_nuevo=o.id,0!=o.porcentaje&&(this.percentage-=parseInt(o.porcentaje)/2),!1}}catch(e){t.e(e)}finally{t.f()}},getHistorial:function(){var e=this;return c()(i.a.mark((function t(){var o,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=e,r=e.$loading({target:"#dialogoHistorial > .el-dialog"}),"/proyectosProductos/getHistorialProcesos",axios.put("/proyectosProductos/getHistorialProcesos",o.form).then((function(e){o.historial=e.data,r.close()})).catch((function(e){r.close(),o.$message.error("Hubo un error."),console.log(e)}));case 4:case"end":return t.stop()}}),t)})))()}}},$=Object(h.a)(S,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"150px"}},[o("el-dialog",{ref:e.dialogRef,attrs:{width:"40%",id:"dialogoCambiarProceso","before-close":e.handleClose,visible:e.dialogoAgregar},on:{"update:visible":function(t){e.dialogoAgregar=t}}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("svg-icon",{attrs:{"icon-class":"process"}}),e._v(" Cambiar Proceso ")],1),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.id,expression:"form.id"}],attrs:{hidden:""},domProps:{value:e.form.id},on:{input:function(t){t.target.composing||e.$set(e.form,"id",t.target.value)}}}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.proyecto_id,expression:"form.proyecto_id"}],attrs:{hidden:""},domProps:{value:e.form.proyecto_id},on:{input:function(t){t.target.composing||e.$set(e.form,"proyecto_id",t.target.value)}}}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.proceso_actual,expression:"form.proceso_actual"}],attrs:{hidden:""},domProps:{value:e.form.proceso_actual},on:{input:function(t){t.target.composing||e.$set(e.form,"proceso_actual",t.target.value)}}}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.proceso_nuevo,expression:"form.proceso_nuevo"}],attrs:{hidden:""},domProps:{value:e.form.proceso_nuevo},on:{input:function(t){t.target.composing||e.$set(e.form,"proceso_nuevo",t.target.value)}}}),e._v(" "),o("el-row",{staticStyle:{"font-size":"12px","margin-bottom":"8px"},attrs:{type:"flex",justify:"space-around"}},[o("el-col",{staticStyle:{"text-align":"right"}},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-time"},on:{click:function(t){e.dialogoHistorial=!0,e.getHistorial()}}},[e._v("Historial")])],1)],1),e._v(" "),o("el-row",{staticStyle:{"font-size":"12px"},attrs:{type:"flex",justify:"space-around"}},[o("el-col",[e._v("\n                Núm. de Parte: "),o("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.form.numero_parte))])])],1),e._v(" "),o("el-row",{staticStyle:{"font-size":"12px"},attrs:{type:"flex",justify:"space-around"}},[o("el-col",[e._v("\n                Núm. de Parte (cliente): "),o("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.form.numero_parte_cliente))])])],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"space-around"}},[o("el-col",{attrs:{span:3}}),e._v(" "),o("el-col",{staticClass:"text-center",attrs:{span:8}},[o("h3",[e._v(e._s(e.procesoActual.nombre))])]),e._v(" "),o("el-col",{attrs:{span:3}})],1),e._v(" "),o("el-row",{staticStyle:{"margin-bottom":"20px"}},[o("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:e.percentage,color:e.procesoActual.color}})],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"space-around"}},[o("el-col",{staticStyle:{"text-align":"left"},attrs:{span:6}},[o("el-button",{attrs:{icon:"el-icon-d-arrow-left"},on:{click:function(t){return e.increaseDecrease(-1)}}})],1),e._v(" "),o("el-col",{attrs:{span:6}}),e._v(" "),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[o("el-button",{attrs:{icon:"el-icon-d-arrow-right"},on:{click:function(t){return e.increaseDecrease(1)}}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"float-left",on:{click:function(t){e.dialogoAgregar=!1}}},[e._v("Cerrar")]),e._v(" "),0!=e.form.id?o("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){return e.guardarProceso()}}},[e._v("Guardar")]):e._e()],1)],1),e._v(" "),o("el-dialog",{attrs:{id:"dialogoHistorial",title:"Historial de Procesos",visible:e.dialogoHistorial,width:"50%"},on:{"update:visible":function(t){e.dialogoHistorial=t}}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.historial,border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{type:"index",align:"center",width:"60"}}),e._v(" "),o("el-table-column",{attrs:{label:"Proceso",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",{style:"font-weight: bold;background-color:"+t.row.proyecto_proceso.proceso.color+";color:"+t.row.proyecto_proceso.proceso.texto_color+";"},[o("svg-icon",{attrs:{"icon-class":"process"}}),e._v("\n                        "+e._s(t.row.proyecto_proceso.proceso.nombre)+"\n                    ")],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"iniciado_el",label:"Fecha",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(null==t.row.iniciado_el?"—":t.row.iniciado_el))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"user.name",label:"Usuario",align:"center","show-overflow-tooltip":""}})],1),e._v(" "),o("div",{staticClass:"filter-container",attrs:{hidden:""}},[o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.historial.length>0,expression:"historial.length>0"}],attrs:{total:e.historial.length,page:e.listQuery.page,limit:e.listQuery.limit,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getHistorial}})],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"float-left",on:{click:function(t){e.dialogoHistorial=!1}}},[e._v("Cerrar")])],1)],1)],1)}),[],!1,null,null,null).exports,D=o("YsXA"),A=o.n(D),L=(o("rdXg"),{data:function(){return{form:{id:0,numero_parte:"",codigo_barras_cliente:"",numero_parte_producto:""},dialogoAgregar:!1,dialogRef:"codigoBarrasDialog",activeName:"first",loadingInstance:""}},directives:{waves:d.a},components:{},methods:{open:function(){this.activeName="first",this.dialogoAgregar=!0;var e=this;this.$nextTick((function(){e.loadingInstance=this.$loading({target:"#dialogoCodigoBarras > .el-dialog"}),A()("#barcodeLocal",this.form.numero_parte),""==this.form.codigo_barras_cliente?A()("#barcodeCliente",this.form.numero_parte):A()("#barcodeCliente",this.form.codigo_barras_cliente),e.loadingInstance.close()}))},close:function(){this.dialogoAgregar=!1},clearFields:function(){this.form.id=0},print:function(e){printJS(e,"html")},handleBlur:function(){this.loadingInstance=this.$loading({target:"#dialogoCodigoBarras > .el-dialog"}),""==this.form.codigo_barras_cliente&&(this.form.codigo_barras_cliente=this.form.codigo_barras_cliente),this.guardar(),A()("#barcodeCliente",this.form.codigo_barras_cliente),this.loadingInstance.close()},handleClick:function(e,t){},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.dialogoAgregar=!1})).catch((function(e){}))},guardar:function(){var e=this;axios.put("/proyectosProductos/saveCodigoBarras",e.form).then((function(t){e.$message.success("Guardado correctamente.")})).catch((function(t){e.close(),e.$message.error("Hubo un error."),console.log(t)}))},download:function(e){var t=this;return c()(i.a.mark((function o(){var r,a,n;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r=document.getElementById(e),a=document.createElement("a"),n=r.getAttribute("src"),a.setAttribute("href",n),a.setAttribute("download",t.form.numero_parte+".png"),a.click();case 6:case"end":return o.stop()}}),o)})))()}},mounted:function(){}}),E=Object(h.a)(L,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"150px"}},[o("el-dialog",{ref:e.dialogRef,attrs:{width:"30%",id:"dialogoCodigoBarras","before-close":e.handleClose,visible:e.dialogoAgregar},on:{"update:visible":function(t){e.dialogoAgregar=t}}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("svg-icon",{attrs:{"icon-class":"process"}}),e._v(" Configuración de Codigo de Barras ")],1),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.id,expression:"form.id"}],attrs:{hidden:""},domProps:{value:e.form.id},on:{input:function(t){t.target.composing||e.$set(e.form,"id",t.target.value)}}}),e._v(" "),o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"Local",name:"first"}},[o("el-row",[o("el-col",{attrs:{span:6}},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",size:"small",icon:"el-icon-printer"},on:{click:function(t){return e.print("barcodeLocalPrint")}}},[e._v("Imprimir")])],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:function(t){return e.download("barcodeLocalPrint")}}},[e._v("Descargar")])],1),e._v(" "),o("el-col",{attrs:{span:18}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.numero_parte,expression:"form.numero_parte"}],attrs:{hidden:""},domProps:{value:e.form.numero_parte},on:{input:function(t){t.target.composing||e.$set(e.form,"numero_parte",t.target.value)}}}),o("br")])],1),e._v(" "),o("div",{staticStyle:{display:"flex","justify-content":"center"}},[o("div",{staticStyle:{width:"min-content",margin:"0 auto","text-align":"center",color:"black"},attrs:{id:"barcodeLocalPrint"}},[o("p",{staticStyle:{"text-align":"center",color:"black"}},[e._v(" NPP: "+e._s(e.form.numero_parte_producto))]),e._v(" "),o("img",{staticClass:"img-thumbnail",staticStyle:{margin:"0 auto"},attrs:{id:"barcodeLocal"}})])])],1),e._v(" "),o("el-tab-pane",{attrs:{label:"Cliente",name:"second"}},[o("el-row",[o("el-col",{attrs:{span:6}},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",size:"small",icon:"el-icon-printer"},on:{click:function(t){return e.print("barcodeClientePrint")}}},[e._v("Imprimir")])],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:function(t){return e.download("barcodeClientePrint")}}},[e._v("Descargar")])],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-input",{attrs:{size:"small"},on:{blur:function(t){return e.handleBlur()}},model:{value:e.form.codigo_barras_cliente,callback:function(t){e.$set(e.form,"codigo_barras_cliente",t)},expression:"form.codigo_barras_cliente"}}),o("br")],1)],1),e._v(" "),o("div",{staticStyle:{display:"flex","justify-content":"center"}},[o("div",{staticStyle:{width:"min-content",margin:"0 auto"},attrs:{id:"barcodeClientePrint"}},[o("p",{staticStyle:{"text-align":"center",color:"black"}},[e._v(" NPP: "+e._s(e.form.numero_parte_producto))]),e._v(" "),o("img",{staticClass:"img-thumbnail",staticStyle:{margin:"0 auto"},attrs:{id:"barcodeCliente"}})])])],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"float-left",on:{click:function(t){e.dialogoAgregar=!1}}},[e._v("Cerrar")])],1)],1)],1)}),[],!1,null,null,null).exports,O={data:function(){return{dialogoAgregar:!1,dialogRef:"menuCodigoBarrasDialog",loadingInstance:"",data:{}}},directives:{waves:d.a},components:{},methods:{open:function(){this.dialogoAgregar=!0,this.$parent.setCurrent(this.data)},close:function(){this.dialogoAgregar=!1},cambiarProceso:function(){this.$parent.cambiarProceso(this.data)},codigoBarras:function(){this.$parent.codigoBarras(this.data)},editar:function(){this.$parent.loadFieldsUpdate(this.data)},handleClose:function(e){var t=this;this.$confirm("Está seguro que deseas salir?").then((function(e){t.dialogoAgregar=!1})).catch((function(e){}))}},mounted:function(){}},N=Object(h.a)(O,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{ref:e.dialogRef,attrs:{width:"30%",id:"dialogoMenuCodigoBarras","before-close":e.handleClose,visible:e.dialogoAgregar},on:{"update:visible":function(t){e.dialogoAgregar=t}}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("svg-icon",{attrs:{"icon-class":"process"}}),e._v(" Menu del Producto: "+e._s(e.data.numero_parte)+" ")],1),e._v(" "),o("el-row",[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(t){e.close(),e.editar()}}},[e._v("Editar")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",title:"Cambiar proceso"},on:{click:function(t){e.close(),e.cambiarProceso()}}},[o("svg-icon",{attrs:{"icon-class":"process"}}),e._v(" Cambiar Proceso\n            ")],1),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-tickets",title:"Cambiar proceso"},on:{click:function(t){e.close(),e.codigoBarras()}}},[e._v("\n                        Codigo de Barras\n            ")])],1),e._v(" "),o("br"),e._v(" "),e.data.proyecto?o("span",{staticStyle:{"margin-right":"5px"}},[o("b",[e._v("Proyecto: ")]),e._v(" "+e._s(e.data.proyecto.numero_parte)+"/"+e._s(e.data.proyecto.numero_parte_cliente))]):e._e(),e._v(" "),o("br"),e._v(" "),e.data.producto?o("span",[o("b",[e._v("Producto: ")]),e._v(" "+e._s(e.data.producto.numero_parte)+"/"+e._s(e.data.producto.numero_parte_cliente))]):e._e(),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("span",[o("b",[e._v("Proceso: ")]),e._v(" "),e.data.Proceso?o("el-tag",{style:"font-weight: bold;background-color:"+e.data.Proceso.proyecto_proceso.proceso.color+";color:"+e.data.Proceso.proyecto_proceso.proceso.texto_color+";"},[o("svg-icon",{style:"background-color:"+e.data.Proceso.proyecto_proceso.proceso.color+";color:"+e.data.Proceso.proyecto_proceso.proceso.texto_color+";",attrs:{"icon-class":"process"}}),e._v("\n                "+e._s(e.data.Proceso.proyecto_proceso.proceso.nombre)+"\n        ")],1):e._e()],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"float-left",on:{click:function(t){e.dialogoAgregar=!1}}},[e._v("Cerrar")])],1)],1)}),[],!1,null,null,null).exports,z=(o("7tbW"),o("lwsE")),F=o.n(z),j=o("W8MJ"),M=o.n(j),B=o("7W2i"),R=o.n(B),H=o("a1gu"),Y=o.n(H),T=o("Nsbk"),U=o.n(T),I=o("rywy");function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=U()(e);if(t){var a=U()(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return Y()(this,o)}}var V=function(e){R()(o,e);var t=q(o);function o(){return F()(this,o),t.call(this,"proyectosProductosComentarios")}return M()(o,[{key:"storeComentario",value:function(e){return Object(I.a)({url:"/proyectosProductosComentarios/store",method:"post",data:e})}},{key:"getProyectoProducoComentarioByProyectoProducto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(I.a)({url:"/proyectosProductosComentarios/"+e+"/getProyectoProducoComentarioByProyectoProducto",method:"post"})}}]),o}(o("+Awk").a);function G(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return J(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw n}}}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var W=new b.a("proyectosProductos"),K=new V("proyectosProductosComentarios"),Q={created:function(){this.$barcodeScanner.init(this.onBarcodeScanned)},destroyed:function(){this.$barcodeScanner.destroy()},data:function(){return{downloading:!1,currentComentario:{id:0,comentario:"",user_id:"",proyecto_producto_id:"",proyecto_proceso_id:""},proyecto_producto_comentarios_list:[],reverse:!1,pagesSizeOptions:[100,300,600,1e3],listUrl:"/proyectosProductos",deleteUrl:"/proyectosProductos/delete",loading:!0,drawer:!1,list:[],mostrarTerminados:0,showProyecto:!1,showProducto:!1,procesosFiltroList:[],clientesFiltroList:[],presearch:"",search:"",page:1,pageSize:100,total:0,currentRow:null,selectSearch:"numero_parte_cliente",barcodeValue:"test",query:{role:""}}},components:{formDialog:v,documentosDialog:C,cambiarProcesoDialog:$,codigoBarrasDialog:E,menuCodigoBarrasDialog:N,Pagination:P.a},directives:{waves:d.a,permission:p.a,role:m.a},computed:{searching:function(){var e=this;if(this.loading=!0,!this.search)return this.loading=!1,this.total=this.list.length,this.list;this.page=1;var t=[];return"nombre_cliente"==this.selectSearch?t=this.list.filter((function(t){return!!t.proyecto.cliente.nombre_cliente.toLowerCase().includes(e.search.toLowerCase())})):"proyecto"==this.selectSearch?t=this.list.filter((function(t){return!!t.proyecto.numero_parte_cliente.toLowerCase().includes(e.search.toLowerCase())})):"orden_compra"==this.selectSearch||(t="numero_parte_cliente"==this.selectSearch?this.list.filter((function(t){return!!t.producto.numero_parte_cliente.toLowerCase().includes(e.search.toLowerCase())})):"numero_parte_producto"==this.selectSearch?this.list.filter((function(t){return!!t.producto.numero_parte.toLowerCase().includes(e.search.toLowerCase())})):"codigo_barras"==this.selectSearch?this.list.filter((function(t){return t.numero_parte.toLowerCase().includes(e.search.toLowerCase())})):"codigo_barras_cliente"==this.selectSearch?this.list.filter((function(t){return!!t.codigo_barras_cliente.toLowerCase().includes(e.search.toLowerCase())})):this.list.filter((function(t){return t[e.selectSearch].toLowerCase().includes(e.search.toLowerCase())}))),this.loading=!1,t},displayData:function(){return this.total=this.searching.length,this.searching.slice(this.pageSize*this.page-this.pageSize,this.pageSize*this.page)},disableEditar:function(){return null==this.currentRow},disableEnviarComentario:function(){return""==this.currentComentario.comentario}},methods:{checkPermission:f.a,barcodeSearch:function(e){var t=this.list.filter((function(t){return t.numero_parte.toLowerCase().includes(e.toLowerCase())}));0==t.length?this.$message({type:"info",message:"No existe orden abierta"}):this.menuCodigoBarras(t[0])},onBarcodeScanned:function(e){e.length>5&&this.barcodeSearch(e),console.log(e)},resetBarcode:function(){this.$barcodeScanner.getPreviousCode()},setCurrent:function(e){this.$refs.tableList.setCurrentRow(e)},handleCurrentChangeTable:function(e){this.currentRow=e},calculateWeeks:function(e){return null==e?"—":u()(e).week()},handleSizeChange:function(e){this.pageSize=e},handleCurrentChangePagination:function(e){this.page=e},handlePresearchChange:function(){this.presearch||(this.search="")},handleSearch:function(){this.getList(),this.search=this.presearch},handleFilter:function(){this.query.page=1},getList:function(){var e=this;return c()(i.a.mark((function t(){var o,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,o=e.query,o.limit,o.page,t.next=4,W.getOrdenesAbiertasList(e.query);case 4:r=t.sent,a=r.data,r.meta,0==e.mostrarTerminados?e.list=a.filter((function(e){return 0==e.proyecto_proceso_producto[0].proyecto_proceso.es_ultimo})):e.list=a,e.pagesSizeOptions=[100,300,600,1e3],e.pagesSizeOptions.push(e.list.length),e.pageSize=e.list.length,e.cargarProcesosFiltro(),e.cargarClientesFiltro(),e.loading=!1;case 14:case"end":return t.stop()}}),t)})))()},cargarProcesosFiltro:function(){var e,t={},o=G(this.list);try{for(o.s();!(e=o.n()).done;){var r=e.value;t={value:r.proyecto_proceso_producto[0].proyecto_proceso.proceso.nombre,text:r.proyecto_proceso_producto[0].proyecto_proceso.proceso.nombre},this.procesosFiltroList.push(t)}}catch(e){o.e(e)}finally{o.f()}var a=_.uniqBy(this.procesosFiltroList,"value");this.procesosFiltroList=a},cargarClientesFiltro:function(){var e,t={},o=G(this.list);try{for(o.s();!(e=o.n()).done;){var r=e.value;t={value:r.proyecto.cliente.nombre_cliente,text:r.proyecto.cliente.nombre_cliente},this.clientesFiltroList.push(t)}}catch(e){o.e(e)}finally{o.f()}var a=_.uniqBy(this.clientesFiltroList,"value");this.clientesFiltroList=a},loadFieldsUpdate:function(e){this.$refs.myForm.form.id=e.id,this.$refs.myForm.form.cantidad=e.cantidad,this.$refs.myForm.form.item=e.item,this.$refs.myForm.form.work_order=e.work_order,this.$refs.myForm.form.heat_number=e.heat_number,this.$refs.myForm.form.fecha_entrega=e.fecha_entrega,this.$refs.myForm.form.fecha_promesa=e.fecha_promesa,this.$refs.myForm.form.proyecto=e.proyecto.numero_parte,this.$refs.myForm.form.producto=e.producto.numero_parte_cliente,this.$refs.myForm.form.producto_local=e.producto.numero_parte,this.$refs.myForm.form.notas=e.notas,this.$refs.myForm.form.precio_dlls=e.precio_dlls,this.$refs.myForm.form.precio_pesos=e.precio_pesos,this.$refs.myForm.form.numero_parte=e.numero_parte,this.$refs.myForm.form.plan_corte=e.plan_corte,this.$refs.myForm.open()},menuCodigoBarras:function(e){this.$refs.menuCodigoBarrasDialog.data=e,this.$refs.menuCodigoBarrasDialog.open()},cambiarProceso:function(e){this.$refs.cambiarProcesoDialog.form.id=e.id,this.$refs.cambiarProcesoDialog.form.numero_parte=e.producto.numero_parte,this.$refs.cambiarProcesoDialog.form.numero_parte_cliente=e.producto.numero_parte_cliente,this.$refs.cambiarProcesoDialog.form.proyecto_id=e.proyecto_id,this.$refs.cambiarProcesoDialog.open()},codigoBarras:function(e){this.$refs.codigoBarrasDialog.form.id=e.id,this.$refs.codigoBarrasDialog.form.numero_parte=e.numero_parte,this.$refs.codigoBarrasDialog.form.codigo_barras_cliente=e.codigo_barras_cliente,this.$refs.codigoBarrasDialog.form.numero_parte_producto=e.producto.numero_parte_cliente,this.$refs.codigoBarrasDialog.open()},loadDocumentos:function(e){this.$refs.documentosDialog.form.id=e.id,this.$refs.documentosDialog.form.numero_parte=e.numero_parte,this.$refs.documentosDialog.form.numero_parte_cliente=e.numero_parte_cliente,this.$refs.documentosDialog.form.proyecto=e.proyecto.numero_parte,this.$refs.documentosDialog.form.producto=e.producto.numero_parte_cliente,this.$refs.documentosDialog.query.proyecto_producto_id=e.id,this.$refs.documentosDialog.open()},deleteRow:function(e){var t=this;this.$confirm("Esto eliminara permanentemente la Orden Abierta. Quieres continuar?","Advertencia",{confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",type:"warning"}).then((function(){var o=t;o.loading=!0,axios.post(o.deleteUrl,{id:e}).then((function(e){o.getList(),o.$message.success("Eliminado correctamente."),o.loading=!1})).catch((function(e){o.$message.error("Hubo un error."),console.log(e),o.loading=!1}))})).catch((function(){t.$message({type:"info",message:"Eliminacion cancelada"})}))},compareDates:function(e){e=u()(e);var t=u()();return t>=e?"danger":e.diff(t,"days")<6&&e.diff(t,"days")>=0?"warning":""},filterProcesoHandler:function(e,t,o){o.property;return t.proyecto_proceso_producto[0].proyecto_proceso.proceso.nombre===e},filterClienteHandler:function(e,t,o){o.property;return t.proyecto.cliente.nombre_cliente===e},getProyectoProductoComentarios:function(){var e=this;return c()(i.a.mark((function t(){var o,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.$loading({target:".el-drawer"}),t.next=3,K.getProyectoProducoComentarioByProyectoProducto(e.currentRow.id);case 3:r=t.sent,a=r.data,r.meta,e.proyecto_producto_comentarios_list=a,o.close();case 8:case"end":return t.stop()}}),t)})))()},submitComentario:function(){var e=this,t=this.$loading({target:".el-drawer"});if(""==this.currentComentario.comentario)return this.$message({message:"Escribe un comentario",type:"danger",duration:5e3}),t.close(),!1;K.storeComentario({current:this.currentComentario}).then((function(o){e.getProyectoProductoComentarios(),t.close(),e.clearCurrentComentario(),e.$message({message:"Comentario agregado correctamente.",type:"success",duration:5e3})})).catch((function(e){console.log(e)}))},dbSelected:function(e){this.drawer=!0,this.currentComentario.proyecto_proceso_id=e.proyecto_proceso_producto[0].proyecto_proceso_id,this.currentComentario.proyecto_producto_id=e.proyecto_proceso_producto[0].proyecto_producto_id,this.getProyectoProductoComentarios()},formatMoment:function(e){return u()(e).format("DD")+" de "+u()(e).format("MMMM")+" del "+u()(e).format("YYYY HH:MM")},formatMomentDate:function(e){return null==e?"":u()(e).format("DD")+" de "+u()(e).format("MMMM")+" del "+u()(e).format("YYYY")},clearCurrentComentario:function(){this.currentComentario={id:0,comentario:"",user_id:"",proyecto_producto_id:"",proyecto_proceso_id:""}},handleDownload:function(){var e=this;this.downloading=!0,Promise.all([o.e(0),o.e(1),o.e(3)]).then(o.bind(null,"6Ru/")).then((function(t){var o=["Proceso","Orden","Producto","Orden de Compra","Cliente","Cantidad","Plan de corte","Orden de Trabajo","Item","Fecha Promesa","Peso (KGS)","Peso (LBS)"],r=["excel_proceso","numero_parte","excel_producto_numero_parte","excel_proyecto_orden_compra","excel_proyecto_nombre_cliente","cantidad","plan_corte","work_order","item","excel_fecha_promesa","excel_producto_peso_lbs","excel_producto_peso_kgs"];Object(f.a)(["ver fecha entrega proyectos"])&&(a()("tHeader"),o=["Fecha entrega"],a()("filterVal"),r=["excel_fecha_entrega"]),Object(f.a)(["view finanzas ordenes abiertas"])&&(a()("tHeader"),o=["Precio (DLLS)","Precio (Pesos)"],a()("filterVal"),r=["precio_dlls","precio_pesos"]),e.list.forEach((function(t,o){t.excel_proceso=t.proyecto_proceso_producto[0].proyecto_proceso.proceso.nombre,t.excel_producto_numero_parte=t.producto.numero_parte_cliente,t.excel_proyecto_orden_compra=t.proyecto.orden_compra,t.excel_proyecto_nombre_cliente=t.proyecto.cliente.nombre_cliente,t.excel_fecha_entrega=e.formatMomentDate(t.fecha_entrega),t.excel_fecha_promesa=e.formatMomentDate(t.fecha_promesa),t.excel_producto_peso_lbs=t.producto.peso_lbs,t.excel_producto_peso_kgs=t.producto.peso_kg}));var n=e.formatJson(r,e.list);t.export_json_to_excel({header:o,data:n,filename:"Ordenes Abiertas"+u()().format(" DD MMMM YYYY HH:MM")}),e.downloading=!1}))},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},arreglarListado:function(){var e=this;return c()(i.a.mark((function t(){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.arreglarListado();case 2:o=t.sent,o.data,o.meta,e.getList();case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getList()}},X=(o("d933"),Object(h.a)(Q,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container",attrs:{id:"app-container"}},[o("div",{staticClass:"filter-container"},[o("div",{staticClass:"filter-item"},[o("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"buscar",clearable:""},on:{change:function(t){return e.handlePresearchChange()}},model:{value:e.presearch,callback:function(t){e.presearch=t},expression:"presearch"}},[o("el-select",{attrs:{slot:"prepend",size:"small",placeholder:"Select"},slot:"prepend",model:{value:e.selectSearch,callback:function(t){e.selectSearch=t},expression:"selectSearch"}},[o("el-option",{attrs:{label:"Núm. de Parte (Cliente)",value:"numero_parte_cliente"}}),e._v(" "),o("el-option",{attrs:{label:"Núm. de Parte (Local)",value:"numero_parte_producto"}}),e._v(" "),o("el-option",{attrs:{label:"Proyecto",value:"proyecto"}}),e._v(" "),o("el-option",{attrs:{label:"Cliente",value:"nombre_cliente"}}),e._v(" "),o("el-option",{attrs:{label:"Codigo de Barras (Local)",value:"codigo_barras"}}),e._v(" "),o("el-option",{attrs:{label:"Codigo de Barras (Cliente)",value:"codigo_barras_cliente"}})],1),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{slot:"append",size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1)],1),e._v(" "),o("el-drawer",{attrs:{title:"Comentarios",visible:e.drawer},on:{"update:visible":function(t){e.drawer=t}}},[o("div",{staticClass:"filter-container"},[o("el-row",{attrs:{gutter:20}},[o("el-col",[o("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:3,maxRows:16}},model:{value:e.currentComentario.comentario,callback:function(t){e.$set(e.currentComentario,"comentario",t)},expression:"currentComentario.comentario"}})],1)],1),e._v(" "),o("el-row",{staticStyle:{"margin-top":"15px"},attrs:{gutter:20,justify:"end"}},[o("el-col",{staticStyle:{float:"right"}},[o("el-button",{staticClass:"filter-item",staticStyle:{float:"right"},attrs:{disabled:e.disableEnviarComentario,type:"success",size:"small",icon:"el-icon-check"},on:{click:function(t){return e.submitComentario()}}},[e._v("\n                                Agregar Comentario\n                            ")])],1)],1)],1),e._v(" "),o("el-row",[o("el-timeline",{attrs:{reverse:e.reverse}},e._l(e.proyecto_producto_comentarios_list,(function(t,r){return o("el-timeline-item",{attrs:{timestamp:t.proyecto_proceso.proceso.nombre,color:t.proyecto_proceso.proceso.color,placement:"top"}},[o("el-card",[o("h4",[e._v(e._s(t.comentario))]),e._v(" "),o("p",[e._v(e._s(t.usuario.name)+" "+e._s(e.formatMoment(t.created_at)))])])],1)})),1)],1)],1),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-edit",disabled:e.disableEditar},on:{click:function(t){return e.loadFieldsUpdate(e.currentRow)}}},[e._v("Editar")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["cambiar proceso ordenes abiertas"],expression:"['cambiar proceso ordenes abiertas']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",title:"Cambiar proceso",disabled:e.disableEditar},on:{click:function(t){return e.cambiarProceso(e.currentRow)}}},[o("svg-icon",{attrs:{"icon-class":"process"}}),e._v(" Cambiar Proceso\n        ")],1),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["codigo barras ordenes abiertas"],expression:"['codigo barras ordenes abiertas']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-tickets",title:"Cambiar proceso",disabled:e.disableEditar},on:{click:function(t){return e.codigoBarras(e.currentRow)}}},[e._v("\n            Codigo de Barras\n        ")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["ver documentos proyectos"],expression:"['ver documentos proyectos']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",size:"small",icon:"el-icon-document",disabled:e.disableEditar},on:{click:function(t){return e.loadDocumentos(e.currentRow)}}},[e._v("Documentos")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["eliminar ordenes abiertas"],expression:"['eliminar ordenes abiertas']"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:e.disableEditar},on:{click:function(t){return e.deleteRow(e.currentRow.id,e.currentRow.numero_parte,e.currentRow.numero_parte_cliente)}}},[e._v("Eliminar")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{loading:e.downloading,size:"small",type:"primary",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v("\n            "+e._s(e.$t("table.export"))+"\n        ")]),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"0px"},attrs:{slot:"reference",type:"primary",size:"small",icon:"el-icon-refresh"},on:{click:function(t){return e.getList()}},slot:"reference"}),e._v(" "),o("el-popover",{staticClass:"filter-item",attrs:{placement:"left-start",size:"small",width:"400",trigger:"click"}},[o("el-switch",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},attrs:{"active-text":"Mostrar Ordenes Terminadas","active-value":1,"inactive-value":0},on:{change:e.handleSearch},model:{value:e.mostrarTerminados,callback:function(t){e.mostrarTerminados=t},expression:"mostrarTerminados"}}),e._v(" "),o("el-switch",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},attrs:{"active-text":"Ver Núm. de Parte Proyecto (local)","active-value":!0,"inactive-value":!1},model:{value:e.showProyecto,callback:function(t){e.showProyecto=t},expression:"showProyecto"}}),e._v(" "),o("el-switch",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},attrs:{"active-text":"Ver Núm. de Parte Producto (local)","active-value":!0,"inactive-value":!1},model:{value:e.showProducto,callback:function(t){e.showProducto=t},expression:"showProducto"}}),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-refresh"},on:{click:function(t){return e.arreglarListado()}}},[e._v("Arreglar Listado")]),e._v(" "),o("el-button",{attrs:{slot:"reference",type:"primary",size:"small",icon:"el-icon-setting"},slot:"reference"})],1)],1),e._v(" "),o("el-row",[o("div",{attrs:{id:"fixed"}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableList",staticStyle:{width:"100%","word-wrap":"break-word"},attrs:{data:e.displayData,height:"1000","highlight-current-row":"",sortable:"",border:"","tooltip-effect":"light",fit:""},on:{"row-dblclick":e.dbSelected,"current-change":e.handleCurrentChangeTable}},[o("af-table-column",{attrs:{label:"Proceso",filters:e.procesosFiltroList,"filter-method":e.filterProcesoHandler,fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-badge",{staticClass:"item",attrs:{value:t.row.proyecto_producto_comentario.length}},[t.row.proyecto_proceso_producto.length>0?o("el-tag",{style:"font-weight: bold;background-color:"+t.row.proyecto_proceso_producto[0].proyecto_proceso.proceso.color+";color:"+t.row.proyecto_proceso_producto[0].proyecto_proceso.proceso.texto_color+";"},[o("svg-icon",{style:"background-color:"+t.row.proyecto_proceso_producto[0].proyecto_proceso.proceso.color+";color:"+t.row.proyecto_proceso_producto[0].proyecto_proceso.proceso.texto_color+";",attrs:{"icon-class":"process"}}),e._v("\n                    "+e._s(t.row.proyecto_proceso_producto[0].proyecto_proceso.proceso.nombre)+"\n                ")],1):o("el-tag",{attrs:{type:"danger"}},[e._v("\n                    Error de Proceso\n                ")])],1)]}}])}),e._v(" "),o("af-table-column",{attrs:{prop:"numero_parte",label:"Orden","show-overflow-tooltip":"",width:"110",fixed:""}}),e._v(" "),e.showProducto?o("af-table-column",{attrs:{prop:"producto.numero_parte",label:"Producto (local)","show-overflow-tooltip":"",width:"110",fixed:""}}):e._e(),e._v(" "),o("af-table-column",{attrs:{prop:"proyecto.orden_compra",label:"Orden de Compra",width:"100","show-overflow-tooltip":""}}),e._v(" "),o("af-table-column",{attrs:{prop:"producto.numero_parte_cliente",label:"Producto (cliente)","show-overflow-tooltip":"",width:"110",fixed:""}}),e._v(" "),e.showProyecto?o("af-table-column",{attrs:{prop:"proyecto.numero_parte",label:"Núm. de Parte del Proyecto (local)","show-overflow-tooltip":"",width:"110"}}):e._e(),e._v(" "),o("af-table-column",{attrs:{prop:"proyecto.cliente.nombre_cliente",filters:e.clientesFiltroList,"filter-method":e.filterClienteHandler,label:"Cliente"}}),e._v(" "),o("af-table-column",{attrs:{prop:"cantidad",label:"Cantidad","show-overflow-tooltip":"",width:"85",align:"center"}}),e._v(" "),o("af-table-column",{attrs:{prop:"plan_corte",label:"Plan de Corte",align:"center",width:"100","show-overflow-tooltip":""}}),e._v(" "),o("af-table-column",{attrs:{prop:"work_order",label:"Orden de Trabajo",align:"center",width:"100","show-overflow-tooltip":""}}),e._v(" "),o("af-table-column",{attrs:{prop:"item",label:"Item",align:"center",width:"80","show-overflow-tooltip":""}}),e._v(" "),o("af-table-column",{attrs:{prop:"fecha_promesa",label:"Fecha Promesa",width:"110",sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.proyecto_proceso_producto[0].proyecto_proceso.es_ultimo?o("el-tag",{attrs:{type:"success"}},[e._v("\n                    "+e._s(e._f("moment")(t.row.fecha_promesa,"YYYY-MMM-DD"))+"\n                ")]):o("el-tag",{attrs:{type:e.compareDates(t.row.fecha_promesa)}},[e._v("\n                    "+e._s(e._f("moment")(t.row.fecha_promesa,"YYYY-MMM-DD"))+"\n                ")])]}}])}),e._v(" "),e.checkPermission(["ver fecha entrega proyectos"])?o("af-table-column",{attrs:{prop:"fecha_entrega",label:"Fecha de Entrega",width:"110",sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.proyecto_proceso_producto[0].proyecto_proceso.es_ultimo?o("el-tag",{attrs:{type:"success"}},[e._v("\n                    "+e._s(e._f("moment")(t.row.fecha_entrega,"YYYY-MMM-DD"))+"\n                ")]):o("el-tag",{attrs:{type:e.compareDates(t.row.fecha_entrega)}},[e._v("\n                    "+e._s(e._f("moment")(t.row.fecha_entrega,"YYYY-MMM-DD"))+"\n                ")])]}}],null,!1,4048497109)}):e._e(),e._v(" "),e.checkPermission(["ver fecha entrega proyectos"])?o("el-table-column",{attrs:{align:"center",width:"84",sortable:"",label:"Semana de Entrega"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.proyecto_proceso_producto[0].proyecto_proceso.es_ultimo?o("el-tag",{attrs:{type:"success"}},[e._v("\n                    "+e._s(e.calculateWeeks(t.row.fecha_entrega))+" \n                ")]):o("el-tag",{attrs:{type:e.compareDates(t.row.fecha_entrega)}},[e._v("\n                    "+e._s(e.calculateWeeks(t.row.fecha_entrega))+"\n                ")])]}}],null,!1,945990325)}):e._e(),e._v(" "),o("af-table-column",{attrs:{label:"Peso (kgs)",align:"center",width:"170","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("vue-numeric",{attrs:{precision:2,separator:",","read-only":!0},model:{value:t.row.producto.peso_kg,callback:function(o){e.$set(t.row.producto,"peso_kg",o)},expression:"scope.row.producto.peso_kg"}}),e._v(" Kgs \n            ")]}}])}),e._v(" "),o("af-table-column",{attrs:{label:"Peso (lbs)",align:"center",width:"170","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("vue-numeric",{attrs:{precision:2,separator:",","read-only":!0},model:{value:t.row.producto.peso_lbs,callback:function(o){e.$set(t.row.producto,"peso_lbs",o)},expression:"scope.row.producto.peso_lbs"}}),e._v(" lbs \n            ")]}}])}),e._v(" "),e.checkPermission(["view finanzas ordenes abiertas"])?o("el-table-column",{attrs:{label:"Precio (Pesos)",align:"center",width:"170","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.precio_pesos?o("vue-numeric",{attrs:{precision:2,currency:"$",separator:",","read-only":!0},model:{value:t.row.precio_pesos,callback:function(o){e.$set(t.row,"precio_pesos",o)},expression:"scope.row.precio_pesos"}}):o("span",[e._v("$ 0.00 ")])]}}],null,!1,4124736257)}):e._e(),e._v(" "),e.checkPermission(["view finanzas ordenes abiertas"])?o("af-table-column",{attrs:{label:"Precio (Dlls)",align:"center",width:"170","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.precio_dlls?o("vue-numeric",{attrs:{precision:2,currency:"$",separator:",","read-only":!0},model:{value:t.row.precio_dlls,callback:function(o){e.$set(t.row,"precio_dlls",o)},expression:"scope.row.precio_dlls"}}):o("span",[e._v("$ 0.00 ")])]}}],null,!1,3334910337)}):e._e(),e._v(" "),o("af-table-column",{attrs:{label:"Notas"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticClass:"pre-formateado"},[e._v(e._s(t.row.notas))])]}}])})],1)],1)]),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"end"}},[o("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","page-size":e.pageSize,"page-sizes":e.pagesSizeOptions,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChangePagination}})],1),e._v(" "),o("el-backtop"),e._v(" "),o("formDialog",{ref:"myForm"}),e._v(" "),o("cambiarProcesoDialog",{ref:"cambiarProcesoDialog"}),e._v(" "),o("codigoBarrasDialog",{ref:"codigoBarrasDialog"}),e._v(" "),o("menuCodigoBarrasDialog",{ref:"menuCodigoBarrasDialog"}),e._v(" "),o("documentosDialog",{ref:"documentosDialog"})],1)}),[],!1,null,null,null));t.default=X.exports},OuqF:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var r=o("g6NE");function a(e){if(e&&e instanceof Array&&e.length>0){var t=r.a.getters&&r.a.getters.permissions,o=e;return t.some((function(e){return o.includes(e)}))}return console.error("Need permissions! Like v-permission=\"['manage permission','edit article']\""),!1}},UeUD:function(e,t,o){"use strict";var r=o("dEV7");o.n(r).a},VyIk:function(e,t,o){(t=o("JPst")(!1)).push([e.i,".waves-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background-color: rgba(0, 0, 0, 0.15);\n    background-clip: padding-box;\n    pointer-events: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n    opacity: 1;\n}\n\n.waves-ripple.z-active {\n    opacity: 0;\n    -webkit-transform: scale(2);\n    transform: scale(2);\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\n}",""]),e.exports=t},bHOZ:function(e,t,o){"use strict";var r=o("4Aq5");o.n(r).a},d933:function(e,t,o){"use strict";var r=o("g5lf");o.n(r).a},dEV7:function(e,t,o){var r=o("ef6S");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(r,a);r.locals&&(e.exports=r.locals)},ef6S:function(e,t,o){(t=o("JPst")(!1)).push([e.i,"\n.color[data-v-3c3ffa0e] {\n    width: 100%;\n}\n",""]),e.exports=t},fJGn:function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return l}));var r={props:{value:{type:Boolean,default:!1}},computed:{comment_disabled:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},a=o("KHd+"),n=Object(a.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dropdown",{attrs:{"show-timeout":100,trigger:"click"}},[o("el-button",{attrs:{plain:""}},[e._v("\n    "+e._s(e.comment_disabled?"Comment closed":"Comment opened")+"\n    "),o("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),o("el-dropdown-menu",{staticClass:"no-padding",attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",[o("el-radio-group",{staticStyle:{padding:"10px"},model:{value:e.comment_disabled,callback:function(t){e.comment_disabled=t},expression:"comment_disabled"}},[o("el-radio",{attrs:{label:!0}},[e._v("\n          Close comment\n        ")]),e._v(" "),o("el-radio",{attrs:{label:!1}},[e._v("\n          Open comment\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,i={props:{value:{required:!0,default:function(){return[]},type:Array}},data:function(){return{platformsOptions:[{key:"a-platform",name:"a-platform"},{key:"b-platform",name:"b-platform"},{key:"c-platform",name:"c-platform"}]}},computed:{platforms:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},s=Object(a.a)(i,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dropdown",{attrs:{"hide-on-click":!1,"show-timeout":100,trigger:"click"}},[o("el-button",{attrs:{plain:""}},[e._v("\n    Platform ("+e._s(e.platforms.length)+")\n    "),o("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),o("el-dropdown-menu",{staticClass:"no-border",attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-checkbox-group",{staticStyle:{padding:"5px 15px"},model:{value:e.platforms,callback:function(t){e.platforms=t},expression:"platforms"}},e._l(e.platformsOptions,(function(t){return o("el-checkbox",{key:t.key,attrs:{label:t.key}},[e._v("\n        "+e._s(t.name)+"\n      ")])})),1)],1)],1)}),[],!1,null,null,null).exports,c={props:{value:{type:String,default:""}},computed:{source_uri:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},l=Object(a.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dropdown",{attrs:{"show-timeout":100,trigger:"click"}},[o("el-button",{attrs:{plain:""}},[e._v("\n    External URL\n    "),o("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),o("el-dropdown-menu",{staticClass:"no-padding no-border",staticStyle:{width:"400px"},attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{"label-width":"0px",prop:"source_uri"}},[o("el-input",{attrs:{placeholder:"Enter the content"},model:{value:e.source_uri,callback:function(t){e.source_uri=t},expression:"source_uri"}},[o("template",{slot:"prepend"},[e._v("\n          Fill in the URL\n        ")])],2)],1)],1)],1)}),[],!1,null,null,null).exports},g5lf:function(e,t,o){var r=o("k5G7");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(r,a);r.locals&&(e.exports=r.locals)},gmK0:function(e,t,o){"use strict";var r=o("g6NE"),a={inserted:function(e,t,o){var a=t.value,n=r.a.getters&&r.a.getters.roles;if(!(a&&a instanceof Array&&a.length>0))throw new Error("Roles are required! Example: v-role=\"['admin','editor']\"");var i=a;n.some((function(e){return i.includes(e)}))||e.parentNode&&e.parentNode.removeChild(e)}},n=function(e){e.directive("role",a)};window.Vue&&(window.role=a,Vue.use(n)),a.install=n;t.a=a},k5G7:function(e,t,o){(t=o("JPst")(!1)).push([e.i,"\n.el-select .el-input {\n        width: 180px;\n}\n.input-with-select .el-input-group__prepend {\n        background-color: #fff;\n}\n.pre-formateado {\n        white-space: pre;\n}\n.el-table .cell {\n        word-break: break-word;\n        overflow: visible;\n}\n.card-action {\n        height: 50px;\n}\n.el-drawer__body {\n\t\theight: 100%;\n\t\t-webkit-box-sizing: border-box;\n\t\t        box-sizing: border-box;\n\t\toverflow-y: auto;\n}\n.el-drawer__body > .filter-container{\n        padding:20px;\n}\n    \n",""]),e.exports=t},k9pt:function(e,t,o){"use strict";Math.easeInOutQuad=function(e,t,o,r){return(e/=r/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function a(e,t,o){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,n=e-a,i=0;t=void 0===t?500:t;!function e(){i+=20;var s,c=Math.easeInOutQuad(i,a,n,t);s=c,document.documentElement.scrollTop=s,document.body.parentNode.scrollTop=s,document.body.scrollTop=s,i<t?r(e):o&&"function"==typeof o&&o()}()}var n={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,15,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&a(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&a(0,800)}}},i=(o("bHOZ"),o("KHd+")),s=Object(i.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[o("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)}),[],!1,null,"68c28e9d",null);t.a=s.exports}}]);